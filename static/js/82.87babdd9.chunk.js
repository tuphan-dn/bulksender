"use strict";(self.webpackChunkbulk_sender=self.webpackChunkbulk_sender||[]).push([[82],{95418:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.IDO=t.Farming=t.Swap=t.SPLT=t.Lamports=t.utils=t.schema=t.keystore=t.account=t.RawWallet=void 0,i(r(87661),t);var s=r(87661);Object.defineProperty(t,"RawWallet",{enumerable:!0,get:function(){return s.default}});var o=r(37343);Object.defineProperty(t,"account",{enumerable:!0,get:function(){return o.default}}),i(r(90006),t),i(r(68051),t);var a=r(68051);Object.defineProperty(t,"keystore",{enumerable:!0,get:function(){return a.default}}),i(r(59810),t);var u=r(59810);Object.defineProperty(t,"schema",{enumerable:!0,get:function(){return u.default}});var c=r(40106);Object.defineProperty(t,"utils",{enumerable:!0,get:function(){return c.default}});var h=r(77357);Object.defineProperty(t,"Lamports",{enumerable:!0,get:function(){return h.default}}),i(r(17096),t);var l=r(17096);Object.defineProperty(t,"SPLT",{enumerable:!0,get:function(){return l.default}}),i(r(8956),t);var f=r(8956);Object.defineProperty(t,"Swap",{enumerable:!0,get:function(){return f.default}}),i(r(87063),t);var p=r(87063);Object.defineProperty(t,"Farming",{enumerable:!0,get:function(){return p.default}}),i(r(84799),t);var d=r(84799);Object.defineProperty(t,"IDO",{enumerable:!0,get:function(){return d.default}})},71256:function(e,t,r){r.r(t),r.d(t,{Account:function(){return or},Authorized:function(){return wi},BLOCKHASH_CACHE_TIMEOUT_MS:function(){return Vr},BPF_LOADER_DEPRECATED_PROGRAM_ID:function(){return ar},BPF_LOADER_PROGRAM_ID:function(){return zr},BpfLoader:function(){return Lr},Connection:function(){return bi},Ed25519Program:function(){return mi},Enum:function(){return Jt},EpochSchedule:function(){return qr},FeeCalculatorLayout:function(){return Rr},Keypair:function(){return yi},LAMPORTS_PER_SOL:function(){return ji},Loader:function(){return Wr},Lockup:function(){return Si},MAX_SEED_LENGTH:function(){return $t},Message:function(){return fr},NONCE_ACCOUNT_LENGTH:function(){return Tr},NonceAccount:function(){return Zr},PACKET_DATA_SIZE:function(){return gr},PublicKey:function(){return er},SOLANA_SCHEMA:function(){return Qt},STAKE_CONFIG_ID:function(){return vi},STAKE_INSTRUCTION_LAYOUTS:function(){return xi},SYSTEM_INSTRUCTION_LAYOUTS:function(){return Or},SYSVAR_CLOCK_PUBKEY:function(){return kr},SYSVAR_INSTRUCTIONS_PUBKEY:function(){return _r},SYSVAR_RECENT_BLOCKHASHES_PUBKEY:function(){return mr},SYSVAR_RENT_PUBKEY:function(){return vr},SYSVAR_REWARDS_PUBKEY:function(){return wr},SYSVAR_STAKE_HISTORY_PUBKEY:function(){return Sr},Secp256k1Program:function(){return Bi},SendTransactionError:function(){return Mr},StakeAuthorizationLayout:function(){return Ii},StakeInstruction:function(){return _i},StakeProgram:function(){return Ai},Struct:function(){return Yt},SystemInstruction:function(){return Cr},SystemProgram:function(){return Ur},Transaction:function(){return yr},TransactionInstruction:function(){return br},VALIDATOR_INFO_KEY:function(){return Ti},VOTE_PROGRAM_ID:function(){return Oi},ValidatorInfo:function(){return Ci},VoteAccount:function(){return Ni},clusterApiUrl:function(){return Ki},sendAndConfirmRawTransaction:function(){return Wi},sendAndConfirmTransaction:function(){return xr}});var n=r(98737),i=r(37762),s=r(29439),o=r(1413),a=r(93433),u=r(15861),c=r(60136),h=r(27277),l=r(15671),f=r(43144),p=r(87757),d=r.n(p),g=r(44967),b=r.n(g),y=r(97429),k=r(48744),m=r.n(k),v=r(68532),w=r.n(v),S=r(21215),_=r(25047),x=r(54338),I=r(85606),A=r(32908),E=r.n(A),P=r(91747),R=r.n(P),B=r(16348),T=r.n(B),Z=function(e){return y.Buffer.isBuffer(e)?e:e instanceof Uint8Array?y.Buffer.from(e.buffer,e.byteOffset,e.byteLength):y.Buffer.from(e)},C="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof r.g?r.g:"undefined"!==typeof self?self:{};function O(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var U={},N={},W=z;function z(e,t){if(!e)throw new Error(t||"Assertion failed")}z.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var L={exports:{}};"function"===typeof Object.create?L.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:L.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e};var K=W,j=L.exports;function D(e,t){return 55296===(64512&e.charCodeAt(t))&&(!(t<0||t+1>=e.length)&&56320===(64512&e.charCodeAt(t+1)))}function q(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function M(e){return 1===e.length?"0"+e:e}function G(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}N.inherits=j,N.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"===typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!==0&&(e="0"+e),i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}else for(var n=0,i=0;i<e.length;i++){var s=e.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=63&s|128):D(e,i)?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++i)),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=63&s|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=63&s|128)}else for(i=0;i<e.length;i++)r[i]=0|e[i];return r},N.toHex=function(e){for(var t="",r=0;r<e.length;r++)t+=M(e[r].toString(16));return t},N.htonl=q,N.toHex32=function(e,t){for(var r="",n=0;n<e.length;n++){var i=e[n];"little"===t&&(i=q(i)),r+=G(i.toString(16))}return r},N.zero2=M,N.zero8=G,N.join32=function(e,t,r,n){var i=r-t;K(i%4===0);for(var s=new Array(i/4),o=0,a=t;o<s.length;o++,a+=4){var u;u="big"===n?e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3]:e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a],s[o]=u>>>0}return s},N.split32=function(e,t){for(var r=new Array(4*e.length),n=0,i=0;n<e.length;n++,i+=4){var s=e[n];"big"===t?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=255&s):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=255&s)}return r},N.rotr32=function(e,t){return e>>>t|e<<32-t},N.rotl32=function(e,t){return e<<t|e>>>32-t},N.sum32=function(e,t){return e+t>>>0},N.sum32_3=function(e,t,r){return e+t+r>>>0},N.sum32_4=function(e,t,r,n){return e+t+r+n>>>0},N.sum32_5=function(e,t,r,n,i){return e+t+r+n+i>>>0},N.sum64=function(e,t,r,n){var i=e[t],s=n+e[t+1]>>>0,o=(s<n?1:0)+r+i;e[t]=o>>>0,e[t+1]=s},N.sum64_hi=function(e,t,r,n){return(t+n>>>0<t?1:0)+e+r>>>0},N.sum64_lo=function(e,t,r,n){return t+n>>>0},N.sum64_4_hi=function(e,t,r,n,i,s,o,a){var u=0,c=t;return u+=(c=c+n>>>0)<t?1:0,u+=(c=c+s>>>0)<s?1:0,e+r+i+o+(u+=(c=c+a>>>0)<a?1:0)>>>0},N.sum64_4_lo=function(e,t,r,n,i,s,o,a){return t+n+s+a>>>0},N.sum64_5_hi=function(e,t,r,n,i,s,o,a,u,c){var h=0,l=t;return h+=(l=l+n>>>0)<t?1:0,h+=(l=l+s>>>0)<s?1:0,h+=(l=l+a>>>0)<a?1:0,e+r+i+o+u+(h+=(l=l+c>>>0)<c?1:0)>>>0},N.sum64_5_lo=function(e,t,r,n,i,s,o,a,u,c){return t+n+s+a+c>>>0},N.rotr64_hi=function(e,t,r){return(t<<32-r|e>>>r)>>>0},N.rotr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},N.shr64_hi=function(e,t,r){return e>>>r},N.shr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0};var F={},X=N,H=W;function V(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}F.BlockHash=V,V.prototype.update=function(e,t){if(e=X.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=X.join32(e,0,e.length-r,this.endian);for(var n=0;n<e.length;n+=this._delta32)this._update(e,n,n+this._delta32)}return this},V.prototype.digest=function(e){return this.update(this._pad()),H(null===this.pending),this._digest(e)},V.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(e<<=3,"big"===this.endian){for(var s=8;s<this.padLength;s++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=e>>>24&255,n[i++]=e>>>16&255,n[i++]=e>>>8&255,n[i++]=255&e}else for(n[i++]=255&e,n[i++]=e>>>8&255,n[i++]=e>>>16&255,n[i++]=e>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,s=8;s<this.padLength;s++)n[i++]=0;return n};var Y={},J={},Q=N.rotr32;function $(e,t,r){return e&t^~e&r}function ee(e,t,r){return e&t^e&r^t&r}function te(e,t,r){return e^t^r}J.ft_1=function(e,t,r,n){return 0===e?$(t,r,n):1===e||3===e?te(t,r,n):2===e?ee(t,r,n):void 0},J.ch32=$,J.maj32=ee,J.p32=te,J.s0_256=function(e){return Q(e,2)^Q(e,13)^Q(e,22)},J.s1_256=function(e){return Q(e,6)^Q(e,11)^Q(e,25)},J.g0_256=function(e){return Q(e,7)^Q(e,18)^e>>>3},J.g1_256=function(e){return Q(e,17)^Q(e,19)^e>>>10};var re=N,ne=F,ie=J,se=re.rotl32,oe=re.sum32,ae=re.sum32_5,ue=ie.ft_1,ce=ne.BlockHash,he=[1518500249,1859775393,2400959708,3395469782];function le(){if(!(this instanceof le))return new le;ce.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}re.inherits(le,ce);var fe=le;le.blockSize=512,le.outSize=160,le.hmacStrength=80,le.padLength=64,le.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=se(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],u=this.h[4];for(n=0;n<r.length;n++){var c=~~(n/20),h=ae(se(i,5),ue(c,s,o,a),u,r[n],he[c]);u=a,a=o,o=se(s,30),s=i,i=h}this.h[0]=oe(this.h[0],i),this.h[1]=oe(this.h[1],s),this.h[2]=oe(this.h[2],o),this.h[3]=oe(this.h[3],a),this.h[4]=oe(this.h[4],u)},le.prototype._digest=function(e){return"hex"===e?re.toHex32(this.h,"big"):re.split32(this.h,"big")};var pe=N,de=F,ge=J,be=W,ye=pe.sum32,ke=pe.sum32_4,me=pe.sum32_5,ve=ge.ch32,we=ge.maj32,Se=ge.s0_256,_e=ge.s1_256,xe=ge.g0_256,Ie=ge.g1_256,Ae=de.BlockHash,Ee=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Pe(){if(!(this instanceof Pe))return new Pe;Ae.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=Ee,this.W=new Array(64)}pe.inherits(Pe,Ae);var Re=Pe;Pe.blockSize=512,Pe.outSize=256,Pe.hmacStrength=192,Pe.padLength=64,Pe.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=ke(Ie(r[n-2]),r[n-7],xe(r[n-15]),r[n-16]);var i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],u=this.h[4],c=this.h[5],h=this.h[6],l=this.h[7];for(be(this.k.length===r.length),n=0;n<r.length;n++){var f=me(l,_e(u),ve(u,c,h),this.k[n],r[n]),p=ye(Se(i),we(i,s,o));l=h,h=c,c=u,u=ye(a,f),a=o,o=s,s=i,i=ye(f,p)}this.h[0]=ye(this.h[0],i),this.h[1]=ye(this.h[1],s),this.h[2]=ye(this.h[2],o),this.h[3]=ye(this.h[3],a),this.h[4]=ye(this.h[4],u),this.h[5]=ye(this.h[5],c),this.h[6]=ye(this.h[6],h),this.h[7]=ye(this.h[7],l)},Pe.prototype._digest=function(e){return"hex"===e?pe.toHex32(this.h,"big"):pe.split32(this.h,"big")};var Be=N,Te=Re;function Ze(){if(!(this instanceof Ze))return new Ze;Te.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Be.inherits(Ze,Te);var Ce=Ze;Ze.blockSize=512,Ze.outSize=224,Ze.hmacStrength=192,Ze.padLength=64,Ze.prototype._digest=function(e){return"hex"===e?Be.toHex32(this.h.slice(0,7),"big"):Be.split32(this.h.slice(0,7),"big")};var Oe=N,Ue=F,Ne=W,We=Oe.rotr64_hi,ze=Oe.rotr64_lo,Le=Oe.shr64_hi,Ke=Oe.shr64_lo,je=Oe.sum64,De=Oe.sum64_hi,qe=Oe.sum64_lo,Me=Oe.sum64_4_hi,Ge=Oe.sum64_4_lo,Fe=Oe.sum64_5_hi,Xe=Oe.sum64_5_lo,He=Ue.BlockHash,Ve=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Ye(){if(!(this instanceof Ye))return new Ye;He.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Ve,this.W=new Array(160)}Oe.inherits(Ye,He);var Je=Ye;function Qe(e,t,r,n,i){var s=e&r^~e&i;return s<0&&(s+=4294967296),s}function $e(e,t,r,n,i,s){var o=t&n^~t&s;return o<0&&(o+=4294967296),o}function et(e,t,r,n,i){var s=e&r^e&i^r&i;return s<0&&(s+=4294967296),s}function tt(e,t,r,n,i,s){var o=t&n^t&s^n&s;return o<0&&(o+=4294967296),o}function rt(e,t){var r=We(e,t,28)^We(t,e,2)^We(t,e,7);return r<0&&(r+=4294967296),r}function nt(e,t){var r=ze(e,t,28)^ze(t,e,2)^ze(t,e,7);return r<0&&(r+=4294967296),r}function it(e,t){var r=We(e,t,14)^We(e,t,18)^We(t,e,9);return r<0&&(r+=4294967296),r}function st(e,t){var r=ze(e,t,14)^ze(e,t,18)^ze(t,e,9);return r<0&&(r+=4294967296),r}function ot(e,t){var r=We(e,t,1)^We(e,t,8)^Le(e,t,7);return r<0&&(r+=4294967296),r}function at(e,t){var r=ze(e,t,1)^ze(e,t,8)^Ke(e,t,7);return r<0&&(r+=4294967296),r}function ut(e,t){var r=We(e,t,19)^We(t,e,29)^Le(e,t,6);return r<0&&(r+=4294967296),r}function ct(e,t){var r=ze(e,t,19)^ze(t,e,29)^Ke(e,t,6);return r<0&&(r+=4294967296),r}Ye.blockSize=1024,Ye.outSize=512,Ye.hmacStrength=192,Ye.padLength=128,Ye.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++)r[n]=e[t+n];for(;n<r.length;n+=2){var i=ut(r[n-4],r[n-3]),s=ct(r[n-4],r[n-3]),o=r[n-14],a=r[n-13],u=ot(r[n-30],r[n-29]),c=at(r[n-30],r[n-29]),h=r[n-32],l=r[n-31];r[n]=Me(i,s,o,a,u,c,h,l),r[n+1]=Ge(i,s,o,a,u,c,h,l)}},Ye.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,n=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],u=this.h[5],c=this.h[6],h=this.h[7],l=this.h[8],f=this.h[9],p=this.h[10],d=this.h[11],g=this.h[12],b=this.h[13],y=this.h[14],k=this.h[15];Ne(this.k.length===r.length);for(var m=0;m<r.length;m+=2){var v=y,w=k,S=it(l,f),_=st(l,f),x=Qe(l,f,p,d,g),I=$e(l,f,p,d,g,b),A=this.k[m],E=this.k[m+1],P=r[m],R=r[m+1],B=Fe(v,w,S,_,x,I,A,E,P,R),T=Xe(v,w,S,_,x,I,A,E,P,R);v=rt(n,i),w=nt(n,i),S=et(n,i,s,o,a),_=tt(n,i,s,o,a,u);var Z=De(v,w,S,_),C=qe(v,w,S,_);y=g,k=b,g=p,b=d,p=l,d=f,l=De(c,h,B,T),f=qe(h,h,B,T),c=a,h=u,a=s,u=o,s=n,o=i,n=De(B,T,Z,C),i=qe(B,T,Z,C)}je(this.h,0,n,i),je(this.h,2,s,o),je(this.h,4,a,u),je(this.h,6,c,h),je(this.h,8,l,f),je(this.h,10,p,d),je(this.h,12,g,b),je(this.h,14,y,k)},Ye.prototype._digest=function(e){return"hex"===e?Oe.toHex32(this.h,"big"):Oe.split32(this.h,"big")};var ht=N,lt=Je;function ft(){if(!(this instanceof ft))return new ft;lt.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}ht.inherits(ft,lt);var pt=ft;ft.blockSize=1024,ft.outSize=384,ft.hmacStrength=192,ft.padLength=128,ft.prototype._digest=function(e){return"hex"===e?ht.toHex32(this.h.slice(0,12),"big"):ht.split32(this.h.slice(0,12),"big")},Y.sha1=fe,Y.sha224=Ce,Y.sha256=Re,Y.sha384=pt,Y.sha512=Je;var dt={},gt=N,bt=F,yt=gt.rotl32,kt=gt.sum32,mt=gt.sum32_3,vt=gt.sum32_4,wt=bt.BlockHash;function St(){if(!(this instanceof St))return new St;wt.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function _t(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function xt(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function It(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}gt.inherits(St,wt),dt.ripemd160=St,St.blockSize=512,St.outSize=160,St.hmacStrength=192,St.padLength=64,St.prototype._update=function(e,t){for(var r=this.h[0],n=this.h[1],i=this.h[2],s=this.h[3],o=this.h[4],a=r,u=n,c=i,h=s,l=o,f=0;f<80;f++){var p=kt(yt(vt(r,_t(f,n,i,s),e[At[f]+t],xt(f)),Pt[f]),o);r=o,o=s,s=yt(i,10),i=n,n=p,p=kt(yt(vt(a,_t(79-f,u,c,h),e[Et[f]+t],It(f)),Rt[f]),l),a=l,l=h,h=yt(c,10),c=u,u=p}p=mt(this.h[1],i,h),this.h[1]=mt(this.h[2],s,l),this.h[2]=mt(this.h[3],o,a),this.h[3]=mt(this.h[4],r,u),this.h[4]=mt(this.h[0],n,c),this.h[0]=p},St.prototype._digest=function(e){return"hex"===e?gt.toHex32(this.h,"little"):gt.split32(this.h,"little")};var At=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Et=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Pt=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Rt=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Bt=N,Tt=W;function Zt(e,t,r){if(!(this instanceof Zt))return new Zt(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(Bt.toArray(t,r))}var Ct=Zt;Zt.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),Tt(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},Zt.prototype.update=function(e,t){return this.inner.update(e,t),this},Zt.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)},function(e){var t=e;t.utils=N,t.common=F,t.sha=Y,t.ripemd=dt,t.hmac=Ct,t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160}(U);var Ot=U,Ut=!1,Nt=!1,Wt={debug:1,default:2,info:2,warning:3,error:4,off:5},zt=Wt.default,Lt=null;var Kt,jt,Dt=function(){try{var e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(t){try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(Kt||(Kt={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED"}(jt||(jt={}));var qt="0123456789abcdef",Mt=function(){function e(t){(0,l.Z)(this,e),Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}return(0,f.Z)(e,[{key:"_log",value:function(e,t){var r=e.toLowerCase();null==Wt[r]&&this.throwArgumentError("invalid log level name","logLevel",e),zt>Wt[r]||console.log.apply(console,t)}},{key:"debug",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.DEBUG,r)}},{key:"info",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.INFO,r)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.WARNING,r)}},{key:"makeError",value:function(t,r,n){if(Nt)return this.makeError("censored error",r,{});r||(r=e.errors.UNKNOWN_ERROR),n||(n={});var i=[];Object.keys(n).forEach((function(e){var t=n[e];try{if(t instanceof Uint8Array){for(var r="",s=0;s<t.length;s++)r+=qt[t[s]>>4],r+=qt[15&t[s]];i.push(e+"=Uint8Array(0x"+r+")")}else i.push(e+"="+JSON.stringify(t))}catch(o){i.push(e+"="+JSON.stringify(n[e].toString()))}})),i.push("code=".concat(r)),i.push("version=".concat(this.version));var s=t;i.length&&(t+=" ("+i.join(", ")+")");var o=new Error(t);return o.reason=s,o.code=r,Object.keys(n).forEach((function(e){o[e]=n[e]})),o}},{key:"throwError",value:function(e,t,r){throw this.makeError(e,t,r)}},{key:"throwArgumentError",value:function(t,r,n){return this.throwError(t,e.errors.INVALID_ARGUMENT,{argument:r,value:n})}},{key:"assert",value:function(e,t,r,n){e||this.throwError(t,r,n)}},{key:"assertArgument",value:function(e,t,r,n){e||this.throwArgumentError(t,r,n)}},{key:"checkNormalize",value:function(t){Dt&&this.throwError("platform missing String.prototype.normalize",e.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Dt})}},{key:"checkSafeUint53",value:function(t,r){"number"===typeof t&&(null==r&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}},{key:"checkArgumentCount",value:function(t,r,n){n=n?": "+n:"",t<r&&this.throwError("missing argument"+n,e.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+n,e.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}},{key:"checkNew",value:function(t,r){t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}},{key:"checkAbstract",value:function(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",e.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}}],[{key:"globalLogger",value:function(){return Lt||(Lt=new e("logger/5.5.0")),Lt}},{key:"setCensorship",value:function(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Ut){if(!t)return;this.globalLogger().throwError("error censorship permanent",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Nt=!!t,Ut=!!r}},{key:"setLogLevel",value:function(t){var r=Wt[t.toLowerCase()];null!=r?zt=r:e.globalLogger().warn("invalid log level - "+t)}},{key:"from",value:function(t){return new e(t)}}]),e}();Mt.errors=jt,Mt.levels=Kt;var Gt=new Mt("bytes/5.5.0");function Ft(e){return e.slice||(e.slice=function(){var t=Array.prototype.slice.call(arguments);return Ft(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function Xt(e){return"number"===typeof e&&e==e&&e%1===0}function Ht(e,t){if(t||(t={}),"number"===typeof e){Gt.checkSafeUint53(e,"invalid arrayify value");for(var r=[];e;)r.unshift(255&e),e=parseInt(String(e/256));return 0===r.length&&r.push(0),Ft(new Uint8Array(r))}if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),function(e){return!!e.toHexString}(e)&&(e=e.toHexString()),function(e,t){if("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))return!1;if(t&&e.length!==2+2*t)return!1;return!0}(e)){var n=e.substring(2);n.length%2&&("left"===t.hexPad?n="0x0"+n.substring(2):"right"===t.hexPad?n+="0":Gt.throwArgumentError("hex data is odd-length","value",e));for(var i=[],s=0;s<n.length;s+=2)i.push(parseInt(n.substring(s,s+2),16));return Ft(new Uint8Array(i))}return function(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"===typeof e)return!1;if(!Xt(e.length)||e.length<0)return!1;for(var t=0;t<e.length;t++){var r=e[t];if(!Xt(r)||r<0||r>=256)return!1}return!0}(e)?Ft(new Uint8Array(e)):Gt.throwArgumentError("invalid arrayify value","value",e)}function Vt(e){return"0x"+Ot.sha256().update(Ht(e)).digest("hex")}new Mt("sha2/5.5.0");var Yt=function(){function e(t){(0,l.Z)(this,e),Object.assign(this,t)}return(0,f.Z)(e,[{key:"encode",value:function(){return y.Buffer.from((0,S.serialize)(Qt,this))}}],[{key:"decode",value:function(e){return(0,S.deserialize)(Qt,this,e)}},{key:"decodeUnchecked",value:function(e){return(0,S.deserializeUnchecked)(Qt,this,e)}}]),e}(),Jt=function(e){(0,c.Z)(r,e);var t=(0,h.Z)(r);function r(e){var n;if((0,l.Z)(this,r),(n=t.call(this,e)).enum="",1!==Object.keys(e).length)throw new Error("Enum can only take single value");return Object.keys(e).map((function(e){n.enum=e})),n}return r}(Yt),Qt=new Map,$t=32;var er=function(e){(0,c.Z)(r,e);var t=(0,h.Z)(r);function r(e){var n;if((0,l.Z)(this,r),(n=t.call(this,{}))._bn=void 0,function(e){return void 0!==e._bn}(e))n._bn=e._bn;else{if("string"===typeof e){var i=w().decode(e);if(32!=i.length)throw new Error("Invalid public key input");n._bn=new(m())(i)}else n._bn=new(m())(e);if(n._bn.byteLength()>32)throw new Error("Invalid public key input")}return n}return(0,f.Z)(r,[{key:"equals",value:function(e){return this._bn.eq(e._bn)}},{key:"toBase58",value:function(){return w().encode(this.toBytes())}},{key:"toBytes",value:function(){return this.toBuffer()}},{key:"toBuffer",value:function(){var e=this._bn.toArrayLike(y.Buffer);if(32===e.length)return e;var t=y.Buffer.alloc(32);return e.copy(t,32-e.length),t}},{key:"toString",value:function(){return this.toBase58()}}],[{key:"createWithSeed",value:function(){var e=(0,u.Z)(d().mark((function e(t,n,i){var s,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=y.Buffer.concat([t.toBuffer(),y.Buffer.from(n),i.toBuffer()]),o=Vt(new Uint8Array(s)).slice(2),e.abrupt("return",new r(y.Buffer.from(o,"hex")));case 3:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"createProgramAddress",value:function(){var e=(0,u.Z)(d().mark((function e(t,n){var i,s,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=y.Buffer.alloc(0),t.forEach((function(e){if(e.length>$t)throw new TypeError("Max seed length exceeded");i=y.Buffer.concat([i,Z(e)])})),i=y.Buffer.concat([i,n.toBuffer(),y.Buffer.from("ProgramDerivedAddress")]),s=Vt(new Uint8Array(i)).slice(2),!rr(o=new(m())(s,16).toArray(void 0,32))){e.next=7;break}throw new Error("Invalid seeds, address must fall off the curve");case 7:return e.abrupt("return",new r(o));case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"findProgramAddress",value:function(){var e=(0,u.Z)(d().mark((function e(t,r){var n,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=255;case 1:if(0==n){e.next=18;break}return e.prev=2,s=t.concat(y.Buffer.from([n])),e.next=6,this.createProgramAddress(s,r);case 6:i=e.sent,e.next=15;break;case 9:if(e.prev=9,e.t0=e.catch(2),!(e.t0 instanceof TypeError)){e.next=13;break}throw e.t0;case 13:return n--,e.abrupt("continue",1);case 15:return e.abrupt("return",[i,n]);case 18:throw new Error("Unable to find a viable program address nonce");case 19:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"isOnCurve",value:function(e){return 1==rr(e)}}]),r}(Yt);er.default=new er("11111111111111111111111111111111"),Qt.set(er,{kind:"struct",fields:[["_bn","u256"]]});var tr=b().lowlevel;function rr(e){var t=[tr.gf(),tr.gf(),tr.gf(),tr.gf()],r=tr.gf(),n=tr.gf(),i=tr.gf(),s=tr.gf(),o=tr.gf(),a=tr.gf(),u=tr.gf();return tr.set25519(t[2],nr),tr.unpack25519(t[1],e),tr.S(i,t[1]),tr.M(s,i,tr.D),tr.Z(i,i,t[2]),tr.A(s,t[2],s),tr.S(o,s),tr.S(a,o),tr.M(u,a,o),tr.M(r,u,i),tr.M(r,r,s),tr.pow2523(r,r),tr.M(r,r,i),tr.M(r,r,s),tr.M(r,r,s),tr.M(t[0],r,s),tr.S(n,t[0]),tr.M(n,n,s),sr(n,i)&&tr.M(t[0],t[0],ir),tr.S(n,t[0]),tr.M(n,n,s),sr(n,i)?0:1}var nr=tr.gf([1]),ir=tr.gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function sr(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return tr.pack25519(r,e),tr.pack25519(n,t),tr.crypto_verify_32(r,0,n,0)}var or=function(){function e(t){(0,l.Z)(this,e),this._keypair=void 0,this._keypair=t?b().sign.keyPair.fromSecretKey(Z(t)):b().sign.keyPair()}return(0,f.Z)(e,[{key:"publicKey",get:function(){return new er(this._keypair.publicKey)}},{key:"secretKey",get:function(){return Z(this._keypair.secretKey)}}]),e}(),ar=new er("BPFLoader1111111111111111111111111111111111"),ur=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"publicKey";return _.blob(32,e)},cr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"string",t=_.struct([_.u32("length"),_.u32("lengthPadding"),_.blob(_.offset(_.u32(),-8),"chars")],e),r=t.decode.bind(t),n=t.encode.bind(t);return t.decode=function(e,t){return r(e,t).chars.toString("utf8")},t.encode=function(e,t,r){var i={chars:y.Buffer.from(e,"utf8")};return n(i,t,r)},t.alloc=function(e){return _.u32().span+_.u32().span+y.Buffer.from(e,"utf8").length},t};function hr(e){for(var t=0,r=0;;){var n=e.shift();if(t|=(127&n)<<7*r,r+=1,0===(128&n))break}return t}function lr(e,t){for(var r=t;;){var n=127&r;if(0==(r>>=7)){e.push(n);break}n|=128,e.push(n)}}var fr=function(){function e(t){var r=this;(0,l.Z)(this,e),this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map((function(e){return new er(e)})),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach((function(e){return r.indexToProgramIds.set(e.programIdIndex,r.accountKeys[e.programIdIndex])}))}return(0,f.Z)(e,[{key:"isAccountSigner",value:function(e){return e<this.header.numRequiredSignatures}},{key:"isAccountWritable",value:function(e){return e<this.header.numRequiredSignatures-this.header.numReadonlySignedAccounts||e>=this.header.numRequiredSignatures&&e<this.accountKeys.length-this.header.numReadonlyUnsignedAccounts}},{key:"isProgramId",value:function(e){return this.indexToProgramIds.has(e)}},{key:"programIds",value:function(){return(0,a.Z)(this.indexToProgramIds.values())}},{key:"nonProgramIds",value:function(){var e=this;return this.accountKeys.filter((function(t,r){return!e.isProgramId(r)}))}},{key:"serialize",value:function(){var e=this.accountKeys.length,t=[];lr(t,e);var r=this.instructions.map((function(e){var t=e.accounts,r=e.programIdIndex,n=w().decode(e.data),i=[];lr(i,t.length);var s=[];return lr(s,n.length),{programIdIndex:r,keyIndicesCount:y.Buffer.from(i),keyIndices:y.Buffer.from(t),dataLength:y.Buffer.from(s),data:n}})),n=[];lr(n,r.length);var i=y.Buffer.alloc(gr);y.Buffer.from(n).copy(i);var s=n.length;r.forEach((function(e){var t=_.struct([_.u8("programIdIndex"),_.blob(e.keyIndicesCount.length,"keyIndicesCount"),_.seq(_.u8("keyIndex"),e.keyIndices.length,"keyIndices"),_.blob(e.dataLength.length,"dataLength"),_.seq(_.u8("userdatum"),e.data.length,"data")]).encode(e,i,s);s+=t})),i=i.slice(0,s);var o=_.struct([_.blob(1,"numRequiredSignatures"),_.blob(1,"numReadonlySignedAccounts"),_.blob(1,"numReadonlyUnsignedAccounts"),_.blob(t.length,"keyCount"),_.seq(ur("key"),e,"keys"),ur("recentBlockhash")]),a={numRequiredSignatures:y.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:y.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:y.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:y.Buffer.from(t),keys:this.accountKeys.map((function(e){return Z(e.toBytes())})),recentBlockhash:w().decode(this.recentBlockhash)},u=y.Buffer.alloc(2048),c=o.encode(a,u);return i.copy(u,c),u.slice(0,c+i.length)}}],[{key:"from",value:function(t){for(var r=(0,a.Z)(t),n=r.shift(),i=r.shift(),s=r.shift(),o=hr(r),u=[],c=0;c<o;c++){var h=r.slice(0,32);r=r.slice(32),u.push(w().encode(y.Buffer.from(h)))}for(var l=r.slice(0,32),f=hr(r=r.slice(32)),p=[],d=0;d<f;d++){var g=r.shift(),b=hr(r),k=r.slice(0,b),m=hr(r=r.slice(b)),v=r.slice(0,m),S=w().encode(y.Buffer.from(v));r=r.slice(m),p.push({programIdIndex:g,accounts:k,data:S})}return new e({header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:w().encode(y.Buffer.from(l)),accountKeys:u,instructions:p})}}]),e}();function pr(e,t){if(!e)throw new Error(t||"Assertion failed")}var dr=y.Buffer.alloc(64).fill(0),gr=1232,br=function e(t){(0,l.Z)(this,e),this.keys=void 0,this.programId=void 0,this.data=y.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)},yr=function(){function e(t){(0,l.Z)(this,e),this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.nonceInfo=void 0,t&&Object.assign(this,t)}return(0,f.Z)(e,[{key:"signature",get:function(){return this.signatures.length>0?this.signatures[0].signature:null}},{key:"add",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(0===r.length)throw new Error("No instructions");return r.forEach((function(t){"instructions"in t?e.instructions=e.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?e.instructions.push(t):e.instructions.push(new br(t))})),this}},{key:"compileMessage",value:function(){var e=this.nonceInfo;e&&this.instructions[0]!=e.nonceInstruction&&(this.recentBlockhash=e.nonce,this.instructions.unshift(e.nonceInstruction));var t,r=this.recentBlockhash;if(!r)throw new Error("Transaction recentBlockhash required");if(this.instructions.length<1&&console.warn("No instructions provided"),this.feePayer)t=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");t=this.signatures[0].publicKey}for(var n=0;n<this.instructions.length;n++)if(void 0===this.instructions[n].programId)throw new Error("Transaction instruction index ".concat(n," has undefined program id"));var a=[],u=[];this.instructions.forEach((function(e){e.keys.forEach((function(e){u.push((0,o.Z)({},e))}));var t=e.programId.toString();a.includes(t)||a.push(t)})),a.forEach((function(e){u.push({pubkey:new er(e),isSigner:!1,isWritable:!1})})),u.sort((function(e,t){var r=e.isSigner===t.isSigner?0:e.isSigner?-1:1,n=e.isWritable===t.isWritable?0:e.isWritable?-1:1;return r||n}));var c=[];u.forEach((function(e){var t=e.pubkey.toString(),r=c.findIndex((function(e){return e.pubkey.toString()===t}));r>-1?c[r].isWritable=c[r].isWritable||e.isWritable:c.push(e)}));var h=c.findIndex((function(e){return e.pubkey.equals(t)}));if(h>-1){var l=c.splice(h,1),f=(0,s.Z)(l,1)[0];f.isSigner=!0,f.isWritable=!0,c.unshift(f)}else c.unshift({pubkey:t,isSigner:!0,isWritable:!0});var p,d=(0,i.Z)(this.signatures);try{var g=function(){var e=p.value,t=c.findIndex((function(t){return t.pubkey.equals(e.publicKey)}));if(!(t>-1))throw new Error("unknown signer: ".concat(e.publicKey.toString()));c[t].isSigner||(c[t].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))};for(d.s();!(p=d.n()).done;)g()}catch(x){d.e(x)}finally{d.f()}var b=0,y=0,k=0,m=[],v=[];c.forEach((function(e){var t=e.pubkey,r=e.isSigner,n=e.isWritable;r?(m.push(t.toString()),b+=1,n||(y+=1)):(v.push(t.toString()),n||(k+=1))}));var S=m.concat(v),_=this.instructions.map((function(e){var t=e.data,r=e.programId;return{programIdIndex:S.indexOf(r.toString()),accounts:e.keys.map((function(e){return S.indexOf(e.pubkey.toString())})),data:w().encode(t)}}));return _.forEach((function(e){pr(e.programIdIndex>=0),e.accounts.forEach((function(e){return pr(e>=0)}))})),new fr({header:{numRequiredSignatures:b,numReadonlySignedAccounts:y,numReadonlyUnsignedAccounts:k},accountKeys:S,recentBlockhash:r,instructions:_})}},{key:"_compile",value:function(){var e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);if(this.signatures.length===t.length&&this.signatures.every((function(e,r){return t[r].equals(e.publicKey)})))return e;return this.signatures=t.map((function(e){return{signature:null,publicKey:e}})),e}},{key:"serializeMessage",value:function(){return this._compile().serialize()}},{key:"setSigners",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No signers");var n=new Set;this.signatures=t.filter((function(e){var t=e.toString();return!n.has(t)&&(n.add(t),!0)})).map((function(e){return{signature:null,publicKey:e}}))}},{key:"sign",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No signers");for(var n=new Set,i=[],s=0,o=t;s<o.length;s++){var a=o[s],u=a.publicKey.toString();n.has(u)||(n.add(u),i.push(a))}this.signatures=i.map((function(e){return{signature:null,publicKey:e.publicKey}}));var c=this._compile();this._partialSign.apply(this,[c].concat(i)),this._verifySignatures(c.serialize(),!0)}},{key:"partialSign",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No signers");for(var n=new Set,i=[],s=0,o=t;s<o.length;s++){var a=o[s],u=a.publicKey.toString();n.has(u)||(n.add(u),i.push(a))}var c=this._compile();this._partialSign.apply(this,[c].concat(i))}},{key:"_partialSign",value:function(e){for(var t=this,r=e.serialize(),n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];i.forEach((function(e){var n=b().sign.detached(r,e.secretKey);t._addSignature(e.publicKey,Z(n))}))}},{key:"addSignature",value:function(e,t){this._compile(),this._addSignature(e,t)}},{key:"_addSignature",value:function(e,t){pr(64===t.length);var r=this.signatures.findIndex((function(t){return e.equals(t.publicKey)}));if(r<0)throw new Error("unknown signer: ".concat(e.toString()));this.signatures[r].signature=y.Buffer.from(t)}},{key:"verifySignatures",value:function(){return this._verifySignatures(this.serializeMessage(),!0)}},{key:"_verifySignatures",value:function(e,t){var r,n=(0,i.Z)(this.signatures);try{for(n.s();!(r=n.n()).done;){var s=r.value,o=s.signature,a=s.publicKey;if(null===o){if(t)return!1}else if(!b().sign.detached.verify(e,o,a.toBuffer()))return!1}}catch(u){n.e(u)}finally{n.f()}return!0}},{key:"serialize",value:function(e){var t=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),r=t.requireAllSignatures,n=t.verifySignatures,i=this.serializeMessage();if(n&&!this._verifySignatures(i,r))throw new Error("Signature verification failed");return this._serialize(i)}},{key:"_serialize",value:function(e){var t=this.signatures,r=[];lr(r,t.length);var n=r.length+64*t.length+e.length,i=y.Buffer.alloc(n);return pr(t.length<256),y.Buffer.from(r).copy(i,0),t.forEach((function(e,t){var n=e.signature;null!==n&&(pr(64===n.length,"signature has invalid length"),y.Buffer.from(n).copy(i,r.length+64*t))})),e.copy(i,r.length+64*t.length),pr(i.length<=gr,"Transaction too large: ".concat(i.length," > ").concat(gr)),i}},{key:"keys",get:function(){return pr(1===this.instructions.length),this.instructions[0].keys.map((function(e){return e.pubkey}))}},{key:"programId",get:function(){return pr(1===this.instructions.length),this.instructions[0].programId}},{key:"data",get:function(){return pr(1===this.instructions.length),this.instructions[0].data}}],[{key:"from",value:function(t){for(var r=(0,a.Z)(t),n=hr(r),i=[],s=0;s<n;s++){var o=r.slice(0,64);r=r.slice(64),i.push(w().encode(y.Buffer.from(o)))}return e.populate(fr.from(r),i)}},{key:"populate",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=new e;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),r.forEach((function(e,r){var i={signature:e==w().encode(dr)?null:w().decode(e),publicKey:t.accountKeys[r]};n.signatures.push(i)})),t.instructions.forEach((function(e){var r=e.accounts.map((function(e){var r=t.accountKeys[e];return{pubkey:r,isSigner:n.signatures.some((function(e){return e.publicKey.toString()===r.toString()}))||t.isAccountSigner(e),isWritable:t.isAccountWritable(e)}}));n.instructions.push(new br({keys:r,programId:t.accountKeys[e.programIdIndex],data:w().decode(e.data)}))})),n}}]),e}(),kr=new er("SysvarC1ock11111111111111111111111111111111"),mr=new er("SysvarRecentB1ockHashes11111111111111111111"),vr=new er("SysvarRent111111111111111111111111111111111"),wr=new er("SysvarRewards111111111111111111111111111111"),Sr=new er("SysvarStakeHistory1111111111111111111111111"),_r=new er("Sysvar1nstructions1111111111111111111111111");function xr(e,t,r,n){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,u.Z)(d().mark((function e(t,r,n,i){var s,o,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment},e.next=3,t.sendTransaction(r,n,s);case 3:return o=e.sent,e.next=6,t.confirmTransaction(o,i&&i.commitment);case 6:if(!(a=e.sent.value).err){e.next=9;break}throw new Error("Transaction ".concat(o," failed (").concat(JSON.stringify(a),")"));case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ar(e){return new Promise((function(t){return setTimeout(t,e)}))}function Er(e,t){var r=e.layout.span>=0?e.layout.span:function(e,t){var r=0;return e.layout.fields.forEach((function(e){e.span>=0?r+=e.span:"function"===typeof e.alloc&&(r+=e.alloc(t[e.property]))})),r}(e,t),n=y.Buffer.alloc(r),i=Object.assign({instruction:e.index},t);return e.layout.encode(i,n),n}function Pr(e,t){var r;try{r=e.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(r.instruction!==e.index)throw new Error("invalid instruction; instruction index mismatch ".concat(r.instruction," != ").concat(e.index));return r}var Rr=_.nu64("lamportsPerSignature"),Br=_.struct([_.u32("version"),_.u32("state"),ur("authorizedPubkey"),ur("nonce"),_.struct([Rr],"feeCalculator")]),Tr=Br.span,Zr=function(){function e(t){(0,l.Z)(this,e),this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}return(0,f.Z)(e,null,[{key:"fromAccountData",value:function(t){var r=Br.decode(Z(t),0);return new e({authorizedPubkey:new er(r.authorizedPubkey),nonce:new er(r.nonce).toString(),feeCalculator:r.feeCalculator})}}]),e}(),Cr=function(){function e(){(0,l.Z)(this,e)}return(0,f.Z)(e,null,[{key:"decodeInstructionType",value:function(e){this.checkProgramId(e.programId);for(var t,r=_.u32("instruction").decode(e.data),n=0,i=Object.entries(Or);n<i.length;n++){var o=(0,s.Z)(i[n],2),a=o[0];if(o[1].index==r){t=a;break}}if(!t)throw new Error("Instruction type incorrect; not a SystemInstruction");return t}},{key:"decodeCreateAccount",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);var t=Pr(Or.Create,e.data),r=t.lamports,n=t.space,i=t.programId;return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:r,space:n,programId:new er(i)}}},{key:"decodeTransfer",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);var t=Pr(Or.Transfer,e.data).lamports;return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}},{key:"decodeTransferWithSeed",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);var t=Pr(Or.TransferWithSeed,e.data),r=t.lamports,n=t.seed,i=t.programId;return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:r,seed:n,programId:new er(i)}}},{key:"decodeAllocate",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);var t=Pr(Or.Allocate,e.data).space;return{accountPubkey:e.keys[0].pubkey,space:t}}},{key:"decodeAllocateWithSeed",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);var t=Pr(Or.AllocateWithSeed,e.data),r=t.base,n=t.seed,i=t.space,s=t.programId;return{accountPubkey:e.keys[0].pubkey,basePubkey:new er(r),seed:n,space:i,programId:new er(s)}}},{key:"decodeAssign",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);var t=Pr(Or.Assign,e.data).programId;return{accountPubkey:e.keys[0].pubkey,programId:new er(t)}}},{key:"decodeAssignWithSeed",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);var t=Pr(Or.AssignWithSeed,e.data),r=t.base,n=t.seed,i=t.programId;return{accountPubkey:e.keys[0].pubkey,basePubkey:new er(r),seed:n,programId:new er(i)}}},{key:"decodeCreateWithSeed",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);var t=Pr(Or.CreateWithSeed,e.data),r=t.base,n=t.seed,i=t.lamports,s=t.space,o=t.programId;return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new er(r),seed:n,lamports:i,space:s,programId:new er(o)}}},{key:"decodeNonceInitialize",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);var t=Pr(Or.InitializeNonceAccount,e.data).authorized;return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new er(t)}}},{key:"decodeNonceAdvance",value:function(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Pr(Or.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}},{key:"decodeNonceWithdraw",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);var t=Pr(Or.WithdrawNonceAccount,e.data).lamports;return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}},{key:"decodeNonceAuthorize",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);var t=Pr(Or.AuthorizeNonceAccount,e.data).authorized;return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new er(t)}}},{key:"checkProgramId",value:function(e){if(!e.equals(Ur.programId))throw new Error("invalid instruction; programId is not SystemProgram")}},{key:"checkKeyLength",value:function(e,t){if(e.length<t)throw new Error("invalid instruction; found ".concat(e.length," keys, expected at least ").concat(t))}}]),e}(),Or=Object.freeze({Create:{index:0,layout:_.struct([_.u32("instruction"),_.ns64("lamports"),_.ns64("space"),ur("programId")])},Assign:{index:1,layout:_.struct([_.u32("instruction"),ur("programId")])},Transfer:{index:2,layout:_.struct([_.u32("instruction"),_.ns64("lamports")])},CreateWithSeed:{index:3,layout:_.struct([_.u32("instruction"),ur("base"),cr("seed"),_.ns64("lamports"),_.ns64("space"),ur("programId")])},AdvanceNonceAccount:{index:4,layout:_.struct([_.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:_.struct([_.u32("instruction"),_.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:_.struct([_.u32("instruction"),ur("authorized")])},AuthorizeNonceAccount:{index:7,layout:_.struct([_.u32("instruction"),ur("authorized")])},Allocate:{index:8,layout:_.struct([_.u32("instruction"),_.ns64("space")])},AllocateWithSeed:{index:9,layout:_.struct([_.u32("instruction"),ur("base"),cr("seed"),_.ns64("space"),ur("programId")])},AssignWithSeed:{index:10,layout:_.struct([_.u32("instruction"),ur("base"),cr("seed"),ur("programId")])},TransferWithSeed:{index:11,layout:_.struct([_.u32("instruction"),_.ns64("lamports"),cr("seed"),ur("programId")])}}),Ur=function(){function e(){(0,l.Z)(this,e)}return(0,f.Z)(e,null,[{key:"createAccount",value:function(e){var t=Er(Or.Create,{lamports:e.lamports,space:e.space,programId:Z(e.programId.toBuffer())});return new br({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:t})}},{key:"transfer",value:function(e){var t,r;"basePubkey"in e?(t=Er(Or.TransferWithSeed,{lamports:e.lamports,seed:e.seed,programId:Z(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]):(t=Er(Or.Transfer,{lamports:e.lamports}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]);return new br({keys:r,programId:this.programId,data:t})}},{key:"assign",value:function(e){var t,r;"basePubkey"in e?(t=Er(Or.AssignWithSeed,{base:Z(e.basePubkey.toBuffer()),seed:e.seed,programId:Z(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=Er(Or.Assign,{programId:Z(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]);return new br({keys:r,programId:this.programId,data:t})}},{key:"createAccountWithSeed",value:function(e){var t=Er(Or.CreateWithSeed,{base:Z(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:Z(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&r.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new br({keys:r,programId:this.programId,data:t})}},{key:"createNonceAccount",value:function(t){var r=new yr;"basePubkey"in t&&"seed"in t?r.add(e.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:Tr,programId:this.programId})):r.add(e.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:Tr,programId:this.programId}));var n={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return r.add(this.nonceInitialize(n)),r}},{key:"nonceInitialize",value:function(e){var t=Er(Or.InitializeNonceAccount,{authorized:Z(e.authorizedPubkey.toBuffer())}),r={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:mr,isSigner:!1,isWritable:!1},{pubkey:vr,isSigner:!1,isWritable:!1}],programId:this.programId,data:t};return new br(r)}},{key:"nonceAdvance",value:function(e){var t=Er(Or.AdvanceNonceAccount),r={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:mr,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t};return new br(r)}},{key:"nonceWithdraw",value:function(e){var t=Er(Or.WithdrawNonceAccount,{lamports:e.lamports});return new br({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:mr,isSigner:!1,isWritable:!1},{pubkey:vr,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}},{key:"nonceAuthorize",value:function(e){var t=Er(Or.AuthorizeNonceAccount,{authorized:Z(e.newAuthorizedPubkey.toBuffer())});return new br({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}},{key:"allocate",value:function(e){var t,r;"basePubkey"in e?(t=Er(Or.AllocateWithSeed,{base:Z(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:Z(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=Er(Or.Allocate,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]);return new br({keys:r,programId:this.programId,data:t})}}]),e}();Ur.programId=new er("11111111111111111111111111111111");var Nr=gr-300,Wr=function(){function e(){(0,l.Z)(this,e)}return(0,f.Z)(e,null,[{key:"getMinNumSignatures",value:function(t){return 2*(Math.ceil(t/e.chunkSize)+1+1)}},{key:"load",value:function(){var t=(0,u.Z)(d().mark((function t(r,n,i,s,o){var a,u,c,h,l,f,p,g,b,k,m,v,w,S;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.getMinimumBalanceForRentExemption(o.length);case 2:return a=t.sent,t.next=5,r.getAccountInfo(i.publicKey,"confirmed");case 5:if(u=t.sent,c=null,null===u){t.next=16;break}if(!u.executable){t.next=11;break}return console.error("Program load failed, account is already executable"),t.abrupt("return",!1);case 11:u.data.length!==o.length&&(c=c||new yr).add(Ur.allocate({accountPubkey:i.publicKey,space:o.length})),u.owner.equals(s)||(c=c||new yr).add(Ur.assign({accountPubkey:i.publicKey,programId:s})),u.lamports<a&&(c=c||new yr).add(Ur.transfer({fromPubkey:n.publicKey,toPubkey:i.publicKey,lamports:a-u.lamports})),t.next=17;break;case 16:c=(new yr).add(Ur.createAccount({fromPubkey:n.publicKey,newAccountPubkey:i.publicKey,lamports:a>0?a:1,space:o.length,programId:s}));case 17:if(null===c){t.next=20;break}return t.next=20,xr(r,c,[n,i],{commitment:"confirmed"});case 20:h=_.struct([_.u32("instruction"),_.u32("offset"),_.u32("bytesLength"),_.u32("bytesLengthPadding"),_.seq(_.u8("byte"),_.offset(_.u32(),-8),"bytes")]),l=e.chunkSize,f=0,p=o,g=[];case 25:if(!(p.length>0)){t.next=39;break}if(b=p.slice(0,l),k=y.Buffer.alloc(l+16),h.encode({instruction:0,offset:f,bytes:b},k),m=(new yr).add({keys:[{pubkey:i.publicKey,isSigner:!0,isWritable:!0}],programId:s,data:k}),g.push(xr(r,m,[n,i],{commitment:"confirmed"})),!r._rpcEndpoint.includes("solana.com")){t.next=35;break}return 4,t.next=35,Ar(250);case 35:f+=l,p=p.slice(l),t.next=25;break;case 39:return t.next=41,Promise.all(g);case 41:return v=_.struct([_.u32("instruction")]),w=y.Buffer.alloc(v.span),v.encode({instruction:1},w),S=(new yr).add({keys:[{pubkey:i.publicKey,isSigner:!0,isWritable:!0},{pubkey:vr,isSigner:!1,isWritable:!1}],programId:s,data:w}),t.next=47,xr(r,S,[n,i],{commitment:"confirmed"});case 47:return t.abrupt("return",!0);case 48:case"end":return t.stop()}}),t)})));return function(e,r,n,i,s){return t.apply(this,arguments)}}()}]),e}();Wr.chunkSize=Nr;var zr=new er("BPFLoader2111111111111111111111111111111111"),Lr=function(){function e(){(0,l.Z)(this,e)}return(0,f.Z)(e,null,[{key:"getMinNumSignatures",value:function(e){return Wr.getMinNumSignatures(e)}},{key:"load",value:function(e,t,r,n,i){return Wr.load(e,t,r,i,n)}}]),e}(),Kr={exports:{}};!function(e,t){var r="undefined"!==typeof self?self:C,n=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();!function(e){!function(t){var r="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,i="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),s="FormData"in e,o="ArrayBuffer"in e;if(o)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function c(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function h(e){return"string"!==typeof e&&(e=String(e)),e}function l(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function f(e){this.map={},e instanceof f?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function p(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function d(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function g(e){var t=new FileReader,r=d(t);return t.readAsArrayBuffer(e),r}function b(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"===typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():o&&i&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=b(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=b(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,r=d(t);return t.readAsText(e),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(e,t){e=c(e),t=h(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},f.prototype.delete=function(e){delete this.map[c(e)]},f.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},f.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},f.prototype.set=function(e,t){this.map[c(e)]=h(t)},f.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},f.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),l(e)},f.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),l(e)},f.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),l(e)},n&&(f.prototype[Symbol.iterator]=f.prototype.entries);var k=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function m(e,t){var r=(t=t||{}).body;if(e instanceof m){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new f(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new f(t.headers)),this.method=function(e){var t=e.toUpperCase();return k.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function v(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function w(e){var t=new f;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}})),t}function S(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new f(t.headers),this.url=t.url||"",this._initBody(e)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},y.call(m.prototype),y.call(S.prototype),S.prototype.clone=function(){return new S(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},S.error=function(){var e=new S(null,{status:0,statusText:""});return e.type="error",e};var _=[301,302,303,307,308];S.redirect=function(e,t){if(-1===_.indexOf(t))throw new RangeError("Invalid status code");return new S(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(I){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function x(e,r){return new Promise((function(n,s){var o=new m(e,r);if(o.signal&&o.signal.aborted)return s(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function u(){a.abort()}a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:w(a.getAllResponseHeaders()||"")};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL");var t="response"in a?a.response:a.responseText;n(new S(t,e))},a.onerror=function(){s(new TypeError("Network request failed"))},a.ontimeout=function(){s(new TypeError("Network request failed"))},a.onabort=function(){s(new t.DOMException("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&i&&(a.responseType="blob"),o.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),o.signal&&(o.signal.addEventListener("abort",u),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",u)}),a.send("undefined"===typeof o._bodyInit?null:o._bodyInit)}))}x.polyfill=!0,e.fetch||(e.fetch=x,e.Headers=f,e.Request=m,e.Response=S),t.Headers=f,t.Request=m,t.Response=S,t.fetch=x,Object.defineProperty(t,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(t=i.fetch).default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t}(Kr,Kr.exports);var jr=O(Kr.exports);function Dr(e){for(var t=0;e>1;)e/=2,t++;return t}var qr=function(){function e(t,r,n,i,s){(0,l.Z)(this,e),this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=r,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=s}return(0,f.Z)(e,[{key:"getEpoch",value:function(e){return this.getEpochAndSlotIndex(e)[0]}},{key:"getEpochAndSlotIndex",value:function(e){if(e<this.firstNormalSlot){var t=Dr(0===(r=e+32+1)?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,1+(r|=r>>32)))-Dr(32)-1;return[t,e-(this.getSlotsInEpoch(t)-32)]}var r,n=e-this.firstNormalSlot,i=Math.floor(n/this.slotsPerEpoch);return[this.firstNormalEpoch+i,n%this.slotsPerEpoch]}},{key:"getFirstSlotInEpoch",value:function(e){return e<=this.firstNormalEpoch?32*(Math.pow(2,e)-1):(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}},{key:"getLastSlotInEpoch",value:function(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}},{key:"getSlotsInEpoch",value:function(e){return e<this.firstNormalEpoch?Math.pow(2,e+Dr(32)):this.slotsPerEpoch}}]),e}(),Mr=function(e){(0,c.Z)(r,e);var t=(0,h.Z)(r);function r(e,n){var i;return(0,l.Z)(this,r),(i=t.call(this,e)).logs=void 0,i.logs=n,i}return r}((0,n.Z)(Error));function Gr(e,t){var r,n=new Promise((function(e){r=setTimeout((function(){return e(null)}),t)}));return Promise.race([e,n]).then((function(e){return clearTimeout(r),e}))}var Fr=(0,x.oQ)((0,x.eE)(er),(0,x.Z_)(),(function(e){return new er(e)})),Xr=(0,x.bc)([(0,x.Z_)(),(0,x.i0)("base64")]),Hr=(0,x.oQ)((0,x.eE)(y.Buffer),Xr,(function(e){return y.Buffer.from(e[0],"base64")})),Vr=3e4;function Yr(e){return(0,x.G0)([(0,x.dt)({jsonrpc:(0,x.i0)("2.0"),id:(0,x.Z_)(),result:e}),(0,x.dt)({jsonrpc:(0,x.i0)("2.0"),id:(0,x.Z_)(),error:(0,x.dt)({code:(0,x._4)(),message:(0,x.Z_)(),data:(0,x.jt)((0,x.Yj)())})})])}var Jr=Yr((0,x._4)());function Qr(e){return(0,x.oQ)(Yr(e),Jr,(function(t){return"error"in t?t:(0,o.Z)((0,o.Z)({},t),{},{result:(0,x.Ue)(t.result,e)})}))}function $r(e){return Qr((0,x.dt)({context:(0,x.dt)({slot:(0,x.Rx)()}),value:e}))}function en(e){return(0,x.dt)({context:(0,x.dt)({slot:(0,x.Rx)()}),value:e})}var tn=(0,x.dt)({foundation:(0,x.Rx)(),foundationTerm:(0,x.Rx)(),initial:(0,x.Rx)(),taper:(0,x.Rx)(),terminal:(0,x.Rx)()}),rn=Qr((0,x.IX)((0,x.AG)((0,x.dt)({epoch:(0,x.Rx)(),effectiveSlot:(0,x.Rx)(),amount:(0,x.Rx)(),postBalance:(0,x.Rx)()})))),nn=(0,x.dt)({epoch:(0,x.Rx)(),slotIndex:(0,x.Rx)(),slotsInEpoch:(0,x.Rx)(),absoluteSlot:(0,x.Rx)(),blockHeight:(0,x.jt)((0,x.Rx)()),transactionCount:(0,x.jt)((0,x.Rx)())}),sn=(0,x.dt)({slotsPerEpoch:(0,x.Rx)(),leaderScheduleSlotOffset:(0,x.Rx)(),warmup:(0,x.O7)(),firstNormalEpoch:(0,x.Rx)(),firstNormalSlot:(0,x.Rx)()}),on=(0,x.IM)((0,x.Z_)(),(0,x.IX)((0,x.Rx)())),an=(0,x.AG)((0,x.G0)([(0,x.dt)({}),(0,x.Z_)()])),un=(0,x.dt)({err:an}),cn=(0,x.i0)("receivedSignature"),hn=(0,x.dt)({"solana-core":(0,x.Z_)(),"feature-set":(0,x.jt)((0,x.Rx)())}),ln=$r((0,x.dt)({err:(0,x.AG)((0,x.G0)([(0,x.dt)({}),(0,x.Z_)()])),logs:(0,x.AG)((0,x.IX)((0,x.Z_)())),accounts:(0,x.jt)((0,x.AG)((0,x.IX)((0,x.dt)({executable:(0,x.O7)(),owner:(0,x.Z_)(),lamports:(0,x.Rx)(),data:(0,x.IX)((0,x.Z_)()),rentEpoch:(0,x.jt)((0,x.Rx)())})))),unitsConsumed:(0,x.jt)((0,x.Rx)())}));var fn=Qr(tn),pn=Qr(nn),dn=Qr(sn),gn=Qr(on),bn=Qr((0,x.Rx)()),yn=$r((0,x.dt)({total:(0,x.Rx)(),circulating:(0,x.Rx)(),nonCirculating:(0,x.Rx)(),nonCirculatingAccounts:(0,x.IX)(Fr)})),kn=(0,x.dt)({amount:(0,x.Z_)(),uiAmount:(0,x.AG)((0,x.Rx)()),decimals:(0,x.Rx)(),uiAmountString:(0,x.jt)((0,x.Z_)())}),mn=$r((0,x.IX)((0,x.dt)({address:Fr,amount:(0,x.Z_)(),uiAmount:(0,x.AG)((0,x.Rx)()),decimals:(0,x.Rx)(),uiAmountString:(0,x.jt)((0,x.Z_)())}))),vn=$r((0,x.IX)((0,x.dt)({pubkey:Fr,account:(0,x.dt)({executable:(0,x.O7)(),owner:Fr,lamports:(0,x.Rx)(),data:Hr,rentEpoch:(0,x.Rx)()})}))),wn=(0,x.dt)({program:(0,x.Z_)(),parsed:(0,x._4)(),space:(0,x.Rx)()}),Sn=$r((0,x.IX)((0,x.dt)({pubkey:Fr,account:(0,x.dt)({executable:(0,x.O7)(),owner:Fr,lamports:(0,x.Rx)(),data:wn,rentEpoch:(0,x.Rx)()})}))),_n=$r((0,x.IX)((0,x.dt)({lamports:(0,x.Rx)(),address:Fr}))),xn=(0,x.dt)({executable:(0,x.O7)(),owner:Fr,lamports:(0,x.Rx)(),data:Hr,rentEpoch:(0,x.Rx)()}),In=(0,x.dt)({pubkey:Fr,account:xn}),An=(0,x.oQ)((0,x.G0)([(0,x.eE)(y.Buffer),wn]),(0,x.G0)([Xr,wn]),(function(e){return Array.isArray(e)?(0,x.Ue)(e,Hr):e})),En=(0,x.dt)({executable:(0,x.O7)(),owner:Fr,lamports:(0,x.Rx)(),data:An,rentEpoch:(0,x.Rx)()}),Pn=(0,x.dt)({pubkey:Fr,account:En}),Rn=(0,x.dt)({state:(0,x.G0)([(0,x.i0)("active"),(0,x.i0)("inactive"),(0,x.i0)("activating"),(0,x.i0)("deactivating")]),active:(0,x.Rx)(),inactive:(0,x.Rx)()}),Bn=Qr((0,x.IX)((0,x.dt)({signature:(0,x.Z_)(),slot:(0,x.Rx)(),err:an,memo:(0,x.AG)((0,x.Z_)()),blockTime:(0,x.jt)((0,x.AG)((0,x.Rx)()))}))),Tn=Qr((0,x.IX)((0,x.dt)({signature:(0,x.Z_)(),slot:(0,x.Rx)(),err:an,memo:(0,x.AG)((0,x.Z_)()),blockTime:(0,x.jt)((0,x.AG)((0,x.Rx)()))}))),Zn=(0,x.dt)({subscription:(0,x.Rx)(),result:en(xn)}),Cn=(0,x.dt)({pubkey:Fr,account:xn}),On=(0,x.dt)({subscription:(0,x.Rx)(),result:en(Cn)}),Un=(0,x.dt)({parent:(0,x.Rx)(),slot:(0,x.Rx)(),root:(0,x.Rx)()}),Nn=(0,x.dt)({subscription:(0,x.Rx)(),result:Un}),Wn=(0,x.G0)([(0,x.dt)({type:(0,x.G0)([(0,x.i0)("firstShredReceived"),(0,x.i0)("completed"),(0,x.i0)("optimisticConfirmation"),(0,x.i0)("root")]),slot:(0,x.Rx)(),timestamp:(0,x.Rx)()}),(0,x.dt)({type:(0,x.i0)("createdBank"),parent:(0,x.Rx)(),slot:(0,x.Rx)(),timestamp:(0,x.Rx)()}),(0,x.dt)({type:(0,x.i0)("frozen"),slot:(0,x.Rx)(),timestamp:(0,x.Rx)(),stats:(0,x.dt)({numTransactionEntries:(0,x.Rx)(),numSuccessfulTransactions:(0,x.Rx)(),numFailedTransactions:(0,x.Rx)(),maxTransactionsPerEntry:(0,x.Rx)()})}),(0,x.dt)({type:(0,x.i0)("dead"),slot:(0,x.Rx)(),timestamp:(0,x.Rx)(),err:(0,x.Z_)()})]),zn=(0,x.dt)({subscription:(0,x.Rx)(),result:Wn}),Ln=(0,x.dt)({subscription:(0,x.Rx)(),result:en((0,x.G0)([un,cn]))}),Kn=(0,x.dt)({subscription:(0,x.Rx)(),result:(0,x.Rx)()}),jn=(0,x.dt)({pubkey:(0,x.Z_)(),gossip:(0,x.AG)((0,x.Z_)()),tpu:(0,x.AG)((0,x.Z_)()),rpc:(0,x.AG)((0,x.Z_)()),version:(0,x.AG)((0,x.Z_)())}),Dn=(0,x.dt)({votePubkey:(0,x.Z_)(),nodePubkey:(0,x.Z_)(),activatedStake:(0,x.Rx)(),epochVoteAccount:(0,x.O7)(),epochCredits:(0,x.IX)((0,x.bc)([(0,x.Rx)(),(0,x.Rx)(),(0,x.Rx)()])),commission:(0,x.Rx)(),lastVote:(0,x.Rx)(),rootSlot:(0,x.AG)((0,x.Rx)())}),qn=Qr((0,x.dt)({current:(0,x.IX)(Dn),delinquent:(0,x.IX)(Dn)})),Mn=(0,x.G0)([(0,x.i0)("processed"),(0,x.i0)("confirmed"),(0,x.i0)("finalized")]),Gn=(0,x.dt)({slot:(0,x.Rx)(),confirmations:(0,x.AG)((0,x.Rx)()),err:an,confirmationStatus:(0,x.jt)(Mn)}),Fn=$r((0,x.IX)((0,x.AG)(Gn))),Xn=Qr((0,x.Rx)()),Hn=(0,x.dt)({signatures:(0,x.IX)((0,x.Z_)()),message:(0,x.dt)({accountKeys:(0,x.IX)((0,x.Z_)()),header:(0,x.dt)({numRequiredSignatures:(0,x.Rx)(),numReadonlySignedAccounts:(0,x.Rx)(),numReadonlyUnsignedAccounts:(0,x.Rx)()}),instructions:(0,x.IX)((0,x.dt)({accounts:(0,x.IX)((0,x.Rx)()),data:(0,x.Z_)(),programIdIndex:(0,x.Rx)()})),recentBlockhash:(0,x.Z_)()})}),Vn=(0,x.dt)({parsed:(0,x._4)(),program:(0,x.Z_)(),programId:Fr}),Yn=(0,x.dt)({accounts:(0,x.IX)(Fr),data:(0,x.Z_)(),programId:Fr}),Jn=(0,x.G0)([Yn,Vn]),Qn=(0,x.G0)([(0,x.dt)({parsed:(0,x._4)(),program:(0,x.Z_)(),programId:(0,x.Z_)()}),(0,x.dt)({accounts:(0,x.IX)((0,x.Z_)()),data:(0,x.Z_)(),programId:(0,x.Z_)()})]),$n=(0,x.oQ)(Jn,Qn,(function(e){return"accounts"in e?(0,x.Ue)(e,Yn):(0,x.Ue)(e,Vn)})),ei=(0,x.dt)({signatures:(0,x.IX)((0,x.Z_)()),message:(0,x.dt)({accountKeys:(0,x.IX)((0,x.dt)({pubkey:Fr,signer:(0,x.O7)(),writable:(0,x.O7)()})),instructions:(0,x.IX)($n),recentBlockhash:(0,x.Z_)()})}),ti=(0,x.dt)({accountIndex:(0,x.Rx)(),mint:(0,x.Z_)(),uiTokenAmount:kn}),ri=(0,x.dt)({err:an,fee:(0,x.Rx)(),innerInstructions:(0,x.jt)((0,x.AG)((0,x.IX)((0,x.dt)({index:(0,x.Rx)(),instructions:(0,x.IX)((0,x.dt)({accounts:(0,x.IX)((0,x.Rx)()),data:(0,x.Z_)(),programIdIndex:(0,x.Rx)()}))})))),preBalances:(0,x.IX)((0,x.Rx)()),postBalances:(0,x.IX)((0,x.Rx)()),logMessages:(0,x.jt)((0,x.AG)((0,x.IX)((0,x.Z_)()))),preTokenBalances:(0,x.jt)((0,x.AG)((0,x.IX)(ti))),postTokenBalances:(0,x.jt)((0,x.AG)((0,x.IX)(ti)))}),ni=(0,x.dt)({err:an,fee:(0,x.Rx)(),innerInstructions:(0,x.jt)((0,x.AG)((0,x.IX)((0,x.dt)({index:(0,x.Rx)(),instructions:(0,x.IX)($n)})))),preBalances:(0,x.IX)((0,x.Rx)()),postBalances:(0,x.IX)((0,x.Rx)()),logMessages:(0,x.jt)((0,x.AG)((0,x.IX)((0,x.Z_)()))),preTokenBalances:(0,x.jt)((0,x.AG)((0,x.IX)(ti))),postTokenBalances:(0,x.jt)((0,x.AG)((0,x.IX)(ti)))}),ii=Qr((0,x.AG)((0,x.dt)({blockhash:(0,x.Z_)(),previousBlockhash:(0,x.Z_)(),parentSlot:(0,x.Rx)(),transactions:(0,x.IX)((0,x.dt)({transaction:Hn,meta:(0,x.AG)(ri)})),rewards:(0,x.jt)((0,x.IX)((0,x.dt)({pubkey:(0,x.Z_)(),lamports:(0,x.Rx)(),postBalance:(0,x.AG)((0,x.Rx)()),rewardType:(0,x.AG)((0,x.Z_)())}))),blockTime:(0,x.AG)((0,x.Rx)())}))),si=Qr((0,x.AG)((0,x.dt)({blockhash:(0,x.Z_)(),previousBlockhash:(0,x.Z_)(),parentSlot:(0,x.Rx)(),signatures:(0,x.IX)((0,x.Z_)()),blockTime:(0,x.AG)((0,x.Rx)())}))),oi=Qr((0,x.AG)((0,x.dt)({slot:(0,x.Rx)(),meta:ri,blockTime:(0,x.jt)((0,x.AG)((0,x.Rx)())),transaction:Hn}))),ai=Qr((0,x.AG)((0,x.dt)({slot:(0,x.Rx)(),transaction:ei,meta:(0,x.AG)(ni),blockTime:(0,x.jt)((0,x.AG)((0,x.Rx)()))}))),ui=$r((0,x.dt)({blockhash:(0,x.Z_)(),feeCalculator:(0,x.dt)({lamportsPerSignature:(0,x.Rx)()})})),ci=(0,x.dt)({slot:(0,x.Rx)(),numTransactions:(0,x.Rx)(),numSlots:(0,x.Rx)(),samplePeriodSecs:(0,x.Rx)()}),hi=Qr((0,x.IX)(ci)),li=$r((0,x.AG)((0,x.dt)({feeCalculator:(0,x.dt)({lamportsPerSignature:(0,x.Rx)()})}))),fi=Qr((0,x.Z_)()),pi=Qr((0,x.Z_)()),di=(0,x.dt)({err:an,logs:(0,x.IX)((0,x.Z_)()),signature:(0,x.Z_)()}),gi=(0,x.dt)({result:en(di),subscription:(0,x.Rx)()}),bi=function(){function e(t,r){(0,l.Z)(this,e),this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={recentBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._accountChangeSubscriptionCounter=0,this._accountChangeSubscriptions={},this._programAccountChangeSubscriptionCounter=0,this._programAccountChangeSubscriptions={},this._rootSubscriptionCounter=0,this._rootSubscriptions={},this._signatureSubscriptionCounter=0,this._signatureSubscriptions={},this._slotSubscriptionCounter=0,this._slotSubscriptions={},this._logsSubscriptionCounter=0,this._logsSubscriptions={},this._slotUpdateSubscriptionCounter=0,this._slotUpdateSubscriptions={};var n,i,s,o,a,c=new URL(t);c.protocol;r&&"string"===typeof r?this._commitment=r:r&&(this._commitment=r.commitment,this._confirmTransactionInitialTimeout=r.confirmTransactionInitialTimeout,n=r.wsEndpoint,i=r.httpHeaders,s=r.fetchMiddleware,o=r.disableRetryOnRateLimit),this._rpcEndpoint=t,this._rpcWsEndpoint=n||function(e){var t=new URL(e),r="https:"===t.protocol;return t.protocol=r?"wss:":"ws:",t.host="",""!==t.port&&(t.port=String(Number(t.port)+1)),t.toString()}(t),this._rpcClient=function(e,t,r,n,i){var s;n&&(s=function(e,t){return new Promise((function(r,i){n(e,t,function(){var e=(0,u.Z)(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=r,e.next=4,jr(t,n);case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),i(e.t2);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}())}))});var o=new(E())(function(){var t=(0,u.Z)(d().mark((function t(n,o){var a,u,c,h,l;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a={method:"POST",body:n,agent:void 0,headers:Object.assign({"Content-Type":"application/json"},r||{})},t.prev=2,u=5,h=500;case 5:if(!s){t.next=11;break}return t.next=8,s(e,a);case 8:c=t.sent,t.next=14;break;case 11:return t.next=13,jr(e,a);case 13:c=t.sent;case 14:if(429===c.status){t.next=16;break}return t.abrupt("break",27);case 16:if(!0!==i){t.next=18;break}return t.abrupt("break",27);case 18:if(0!==(u-=1)){t.next=21;break}return t.abrupt("break",27);case 21:return console.log("Server responded with ".concat(c.status," ").concat(c.statusText,".  Retrying after ").concat(h,"ms delay...")),t.next=24,Ar(h);case 24:h*=2;case 25:t.next=5;break;case 27:return t.next=29,c.text();case 29:l=t.sent,c.ok?o(null,l):o(new Error("".concat(c.status," ").concat(c.statusText,": ").concat(l))),t.next=36;break;case 33:t.prev=33,t.t0=t.catch(2),t.t0 instanceof Error&&o(t.t0);case 36:return t.prev=36,t.finish(36);case 38:case"end":return t.stop()}}),t,null,[[2,33,36,38]])})));return function(e,r){return t.apply(this,arguments)}}(),{});return o}(c.toString(),0,i,s,o),this._rpcRequest=(a=this._rpcClient,function(e,t){return new Promise((function(r,n){a.request(e,t,(function(e,t){e?n(e):r(t)}))}))}),this._rpcBatchRequest=function(e){return function(t){return new Promise((function(r,n){0===t.length&&r([]);var i=t.map((function(t){return e.request(t.methodName,t.args)}));e.request(i,(function(e,t){e?n(e):r(t)}))}))}}(this._rpcClient),this._rpcWebSocket=new I.K(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}return(0,f.Z)(e,[{key:"commitment",get:function(){return this._commitment}},{key:"getBalanceAndContext",value:function(){var e=(0,u.Z)(d().mark((function e(t,r){var n,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t.toBase58()],r),e.next=3,this._rpcRequest("getBalance",n);case 3:if(i=e.sent,!("error"in(s=(0,x.Ue)(i,$r((0,x.Rx)()))))){e.next=7;break}throw new Error("failed to get balance for "+t.toBase58()+": "+s.error.message);case 7:return e.abrupt("return",s.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getBalance",value:function(){var e=(0,u.Z)(d().mark((function e(t,r){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBalanceAndContext(t,r).then((function(e){return e.value})).catch((function(e){throw new Error("failed to get balance of account "+t.toBase58()+": "+e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getBlockTime",value:function(){var e=(0,u.Z)(d().mark((function e(t){var r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getBlockTime",[t]);case 2:if(r=e.sent,!("error"in(n=(0,x.Ue)(r,Qr((0,x.AG)((0,x.Rx)())))))){e.next=6;break}throw new Error("failed to get block time for slot "+t+": "+n.error.message);case 6:return e.abrupt("return",n.result);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMinimumLedgerSlot",value:function(){var e=(0,u.Z)(d().mark((function e(){var t,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("minimumLedgerSlot",[]);case 2:if(t=e.sent,!("error"in(r=(0,x.Ue)(t,Qr((0,x.Rx)()))))){e.next=6;break}throw new Error("failed to get minimum ledger slot: "+r.error.message);case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFirstAvailableBlock",value:function(){var e=(0,u.Z)(d().mark((function e(){var t,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getFirstAvailableBlock",[]);case 2:if(t=e.sent,!("error"in(r=(0,x.Ue)(t,bn)))){e.next=6;break}throw new Error("failed to get first available block: "+r.error.message);case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSupply",value:function(){var e=(0,u.Z)(d().mark((function e(t){var r,n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},r="string"===typeof t?{commitment:t}:t?(0,o.Z)((0,o.Z)({},t),{},{commitment:t&&t.commitment||this.commitment}):{commitment:this.commitment},e.next=4,this._rpcRequest("getSupply",[r]);case 4:if(n=e.sent,!("error"in(i=(0,x.Ue)(n,yn)))){e.next=8;break}throw new Error("failed to get supply: "+i.error.message);case 8:return e.abrupt("return",i.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTokenSupply",value:function(){var e=(0,u.Z)(d().mark((function e(t,r){var n,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t.toBase58()],r),e.next=3,this._rpcRequest("getTokenSupply",n);case 3:if(i=e.sent,!("error"in(s=(0,x.Ue)(i,$r(kn))))){e.next=7;break}throw new Error("failed to get token supply: "+s.error.message);case 7:return e.abrupt("return",s.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getTokenAccountBalance",value:function(){var e=(0,u.Z)(d().mark((function e(t,r){var n,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t.toBase58()],r),e.next=3,this._rpcRequest("getTokenAccountBalance",n);case 3:if(i=e.sent,!("error"in(s=(0,x.Ue)(i,$r(kn))))){e.next=7;break}throw new Error("failed to get token account balance: "+s.error.message);case 7:return e.abrupt("return",s.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getTokenAccountsByOwner",value:function(){var e=(0,u.Z)(d().mark((function e(t,r,n){var i,s,o,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[t.toBase58()],"mint"in r?i.push({mint:r.mint.toBase58()}):i.push({programId:r.programId.toBase58()}),s=this._buildArgs(i,n,"base64"),e.next=5,this._rpcRequest("getTokenAccountsByOwner",s);case 5:if(o=e.sent,!("error"in(a=(0,x.Ue)(o,vn)))){e.next=9;break}throw new Error("failed to get token accounts owned by account "+t.toBase58()+": "+a.error.message);case 9:return e.abrupt("return",a.result);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getParsedTokenAccountsByOwner",value:function(){var e=(0,u.Z)(d().mark((function e(t,r,n){var i,s,o,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[t.toBase58()],"mint"in r?i.push({mint:r.mint.toBase58()}):i.push({programId:r.programId.toBase58()}),s=this._buildArgs(i,n,"jsonParsed"),e.next=5,this._rpcRequest("getTokenAccountsByOwner",s);case 5:if(o=e.sent,!("error"in(a=(0,x.Ue)(o,Sn)))){e.next=9;break}throw new Error("failed to get token accounts owned by account "+t.toBase58()+": "+a.error.message);case 9:return e.abrupt("return",a.result);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getLargestAccounts",value:function(){var e=(0,u.Z)(d().mark((function e(t){var r,n,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,o.Z)((0,o.Z)({},t),{},{commitment:t&&t.commitment||this.commitment}),n=r.filter||r.commitment?[r]:[],e.next=4,this._rpcRequest("getLargestAccounts",n);case 4:if(i=e.sent,!("error"in(s=(0,x.Ue)(i,_n)))){e.next=8;break}throw new Error("failed to get largest accounts: "+s.error.message);case 8:return e.abrupt("return",s.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTokenLargestAccounts",value:function(){var e=(0,u.Z)(d().mark((function e(t,r){var n,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t.toBase58()],r),e.next=3,this._rpcRequest("getTokenLargestAccounts",n);case 3:if(i=e.sent,!("error"in(s=(0,x.Ue)(i,mn)))){e.next=7;break}throw new Error("failed to get token largest accounts: "+s.error.message);case 7:return e.abrupt("return",s.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getAccountInfoAndContext",value:function(){var e=(0,u.Z)(d().mark((function e(t,r){var n,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t.toBase58()],r,"base64"),e.next=3,this._rpcRequest("getAccountInfo",n);case 3:if(i=e.sent,!("error"in(s=(0,x.Ue)(i,$r((0,x.AG)(xn)))))){e.next=7;break}throw new Error("failed to get info about account "+t.toBase58()+": "+s.error.message);case 7:return e.abrupt("return",s.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getParsedAccountInfo",value:function(){var e=(0,u.Z)(d().mark((function e(t,r){var n,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t.toBase58()],r,"jsonParsed"),e.next=3,this._rpcRequest("getAccountInfo",n);case 3:if(i=e.sent,!("error"in(s=(0,x.Ue)(i,$r((0,x.AG)(En)))))){e.next=7;break}throw new Error("failed to get info about account "+t.toBase58()+": "+s.error.message);case 7:return e.abrupt("return",s.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getAccountInfo",value:function(){var e=(0,u.Z)(d().mark((function e(t,r){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getAccountInfoAndContext(t,r);case 3:return n=e.sent,e.abrupt("return",n.value);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("failed to get info about account "+t.toBase58()+": "+e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getMultipleAccountsInfo",value:function(){var e=(0,u.Z)(d().mark((function e(t,r){var n,i,s,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){return e.toBase58()})),i=this._buildArgs([n],r,"base64"),e.next=4,this._rpcRequest("getMultipleAccounts",i);case 4:if(s=e.sent,!("error"in(o=(0,x.Ue)(s,$r((0,x.IX)((0,x.AG)(xn))))))){e.next=8;break}throw new Error("failed to get info for accounts "+n+": "+o.error.message);case 8:return e.abrupt("return",o.result.value);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getStakeActivation",value:function(){var e=(0,u.Z)(d().mark((function e(t,r,n){var i,s,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._buildArgs([t.toBase58()],r,void 0,void 0!==n?{epoch:n}:void 0),e.next=3,this._rpcRequest("getStakeActivation",i);case 3:if(s=e.sent,!("error"in(o=(0,x.Ue)(s,Qr(Rn))))){e.next=7;break}throw new Error("failed to get Stake Activation ".concat(t.toBase58(),": ").concat(o.error.message));case 7:return e.abrupt("return",o.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getProgramAccounts",value:function(){var e=(0,u.Z)(d().mark((function e(t,r){var n,i,s,o,a,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},r&&("string"===typeof r?i=r:(i=r.commitment,s=r.encoding,r.dataSlice&&(n.dataSlice=r.dataSlice),r.filters&&(n.filters=r.filters))),o=this._buildArgs([t.toBase58()],i,s||"base64",n),e.next=5,this._rpcRequest("getProgramAccounts",o);case 5:if(a=e.sent,!("error"in(u=(0,x.Ue)(a,Qr((0,x.IX)(In)))))){e.next=9;break}throw new Error("failed to get accounts owned by program "+t.toBase58()+": "+u.error.message);case 9:return e.abrupt("return",u.result);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getParsedProgramAccounts",value:function(){var e=(0,u.Z)(d().mark((function e(t,r){var n,i,s,o,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},r&&("string"===typeof r?i=r:(i=r.commitment,r.filters&&(n.filters=r.filters))),s=this._buildArgs([t.toBase58()],i,"jsonParsed",n),e.next=5,this._rpcRequest("getProgramAccounts",s);case 5:if(o=e.sent,!("error"in(a=(0,x.Ue)(o,Qr((0,x.IX)(Pn)))))){e.next=9;break}throw new Error("failed to get accounts owned by program "+t.toBase58()+": "+a.error.message);case 9:return e.abrupt("return",a.result);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"confirmTransaction",value:function(){var e=(0,u.Z)(d().mark((function e(t,r){var n,i,s,o,a,u,c,h,l=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=w().decode(t),e.next=7;break;case 4:throw e.prev=4,e.t0=e.catch(0),new Error("signature must be base58 encoded: "+t);case 7:pr(64===n.length,"signature has invalid length"),i=Date.now(),s=r||this.commitment,a=null,u=new Promise((function(e,r){try{o=l.onSignature(t,(function(t,r){o=void 0,a={context:r,value:t},e(null)}),s)}catch(n){r(n)}})),c=this._confirmTransactionInitialTimeout||6e4,e.t1=s,e.next="processed"===e.t1||"recent"===e.t1||"single"===e.t1||"confirmed"===e.t1||"singleGossip"===e.t1?16:18;break;case 16:return c=this._confirmTransactionInitialTimeout||3e4,e.abrupt("break",18);case 18:return e.prev=18,e.next=21,Gr(u,c);case 21:return e.prev=21,o&&this.removeSignatureListener(o),e.finish(21);case 24:if(null!==a){e.next=27;break}throw h=(Date.now()-i)/1e3,new Error("Transaction was not confirmed in ".concat(h.toFixed(2)," seconds. It is unknown if it succeeded or failed. Check signature ").concat(t," using the Solana Explorer or CLI tools."));case 27:return e.abrupt("return",a);case 28:case"end":return e.stop()}}),e,this,[[0,4],[18,,21,24]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getClusterNodes",value:function(){var e=(0,u.Z)(d().mark((function e(){var t,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getClusterNodes",[]);case 2:if(t=e.sent,!("error"in(r=(0,x.Ue)(t,Qr((0,x.IX)(jn)))))){e.next=6;break}throw new Error("failed to get cluster nodes: "+r.error.message);case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getVoteAccounts",value:function(){var e=(0,u.Z)(d().mark((function e(t){var r,n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getVoteAccounts",r);case 3:if(n=e.sent,!("error"in(i=(0,x.Ue)(n,qn)))){e.next=7;break}throw new Error("failed to get vote accounts: "+i.error.message);case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSlot",value:function(){var e=(0,u.Z)(d().mark((function e(t){var r,n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getSlot",r);case 3:if(n=e.sent,!("error"in(i=(0,x.Ue)(n,Qr((0,x.Rx)()))))){e.next=7;break}throw new Error("failed to get slot: "+i.error.message);case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSlotLeader",value:function(){var e=(0,u.Z)(d().mark((function e(t){var r,n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getSlotLeader",r);case 3:if(n=e.sent,!("error"in(i=(0,x.Ue)(n,Qr((0,x.Z_)()))))){e.next=7;break}throw new Error("failed to get slot leader: "+i.error.message);case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSlotLeaders",value:function(){var e=(0,u.Z)(d().mark((function e(t,r){var n,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[t,r],e.next=3,this._rpcRequest("getSlotLeaders",n);case 3:if(i=e.sent,!("error"in(s=(0,x.Ue)(i,Qr((0,x.IX)(Fr)))))){e.next=7;break}throw new Error("failed to get slot leaders: "+s.error.message);case 7:return e.abrupt("return",s.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSignatureStatus",value:function(){var e=(0,u.Z)(d().mark((function e(t,r){var n,i,s,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSignatureStatuses([t],r);case 2:return n=e.sent,i=n.context,pr(1===(s=n.value).length),o=s[0],e.abrupt("return",{context:i,value:o});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSignatureStatuses",value:function(){var e=(0,u.Z)(d().mark((function e(t,r){var n,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[t],r&&n.push(r),e.next=4,this._rpcRequest("getSignatureStatuses",n);case 4:if(i=e.sent,!("error"in(s=(0,x.Ue)(i,Fn)))){e.next=8;break}throw new Error("failed to get signature status: "+s.error.message);case 8:return e.abrupt("return",s.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getTransactionCount",value:function(){var e=(0,u.Z)(d().mark((function e(t){var r,n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getTransactionCount",r);case 3:if(n=e.sent,!("error"in(i=(0,x.Ue)(n,Qr((0,x.Rx)()))))){e.next=7;break}throw new Error("failed to get transaction count: "+i.error.message);case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTotalSupply",value:function(){var e=(0,u.Z)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0});case 2:return r=e.sent,e.abrupt("return",r.value.total);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getInflationGovernor",value:function(){var e=(0,u.Z)(d().mark((function e(t){var r,n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getInflationGovernor",r);case 3:if(n=e.sent,!("error"in(i=(0,x.Ue)(n,fn)))){e.next=7;break}throw new Error("failed to get inflation: "+i.error.message);case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getInflationReward",value:function(){var e=(0,u.Z)(d().mark((function e(t,r,n){var i,s,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._buildArgs([t.map((function(e){return e.toBase58()}))],n,void 0,{epoch:r}),e.next=3,this._rpcRequest("getInflationReward",i);case 3:if(s=e.sent,!("error"in(o=(0,x.Ue)(s,rn)))){e.next=7;break}throw new Error("failed to get inflation reward: "+o.error.message);case 7:return e.abrupt("return",o.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getEpochInfo",value:function(){var e=(0,u.Z)(d().mark((function e(t){var r,n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getEpochInfo",r);case 3:if(n=e.sent,!("error"in(i=(0,x.Ue)(n,pn)))){e.next=7;break}throw new Error("failed to get epoch info: "+i.error.message);case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getEpochSchedule",value:function(){var e=(0,u.Z)(d().mark((function e(){var t,r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getEpochSchedule",[]);case 2:if(t=e.sent,!("error"in(r=(0,x.Ue)(t,dn)))){e.next=6;break}throw new Error("failed to get epoch schedule: "+r.error.message);case 6:return n=r.result,e.abrupt("return",new qr(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getLeaderSchedule",value:function(){var e=(0,u.Z)(d().mark((function e(){var t,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getLeaderSchedule",[]);case 2:if(t=e.sent,!("error"in(r=(0,x.Ue)(t,gn)))){e.next=6;break}throw new Error("failed to get leader schedule: "+r.error.message);case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMinimumBalanceForRentExemption",value:function(){var e=(0,u.Z)(d().mark((function e(t,r){var n,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t],r),e.next=3,this._rpcRequest("getMinimumBalanceForRentExemption",n);case 3:if(i=e.sent,!("error"in(s=(0,x.Ue)(i,Xn)))){e.next=8;break}return console.warn("Unable to fetch minimum balance for rent exemption"),e.abrupt("return",0);case 8:return e.abrupt("return",s.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getRecentBlockhashAndContext",value:function(){var e=(0,u.Z)(d().mark((function e(t){var r,n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getRecentBlockhash",r);case 3:if(n=e.sent,!("error"in(i=(0,x.Ue)(n,ui)))){e.next=7;break}throw new Error("failed to get recent blockhash: "+i.error.message);case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRecentPerformanceSamples",value:function(){var e=(0,u.Z)(d().mark((function e(t){var r,n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs(t?[t]:[]),e.next=3,this._rpcRequest("getRecentPerformanceSamples",r);case 3:if(n=e.sent,!("error"in(i=(0,x.Ue)(n,hi)))){e.next=7;break}throw new Error("failed to get recent performance samples: "+i.error.message);case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFeeCalculatorForBlockhash",value:function(){var e=(0,u.Z)(d().mark((function e(t,r){var n,i,s,o,a,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t],r),e.next=3,this._rpcRequest("getFeeCalculatorForBlockhash",n);case 3:if(i=e.sent,!("error"in(s=(0,x.Ue)(i,li)))){e.next=7;break}throw new Error("failed to get fee calculator: "+s.error.message);case 7:return o=s.result,a=o.context,u=o.value,e.abrupt("return",{context:a,value:null!==u?u.feeCalculator:null});case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getRecentBlockhash",value:function(){var e=(0,u.Z)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getRecentBlockhashAndContext(t);case 3:return r=e.sent,e.abrupt("return",r.value);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("failed to get recent blockhash: "+e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getVersion",value:function(){var e=(0,u.Z)(d().mark((function e(){var t,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getVersion",[]);case 2:if(t=e.sent,!("error"in(r=(0,x.Ue)(t,Qr(hn))))){e.next=6;break}throw new Error("failed to get version: "+r.error.message);case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getGenesisHash",value:function(){var e=(0,u.Z)(d().mark((function e(){var t,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getGenesisHash",[]);case 2:if(t=e.sent,!("error"in(r=(0,x.Ue)(t,Qr((0,x.Z_)()))))){e.next=6;break}throw new Error("failed to get genesis hash: "+r.error.message);case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getBlock",value:function(){var e=(0,u.Z)(d().mark((function e(t,r){var n,i,s,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r&&r.commitment),e.next=3,this._rpcRequest("getConfirmedBlock",n);case 3:if(i=e.sent,!("error"in(s=(0,x.Ue)(i,ii)))){e.next=7;break}throw new Error("failed to get confirmed block: "+s.error.message);case 7:if(a=s.result){e.next=10;break}return e.abrupt("return",a);case 10:return e.abrupt("return",(0,o.Z)((0,o.Z)({},a),{},{transactions:a.transactions.map((function(e){var t=e.transaction,r=e.meta,n=new fr(t.message);return{meta:r,transaction:(0,o.Z)((0,o.Z)({},t),{},{message:n})}}))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getTransaction",value:function(){var e=(0,u.Z)(d().mark((function e(t,r){var n,i,s,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r&&r.commitment),e.next=3,this._rpcRequest("getConfirmedTransaction",n);case 3:if(i=e.sent,!("error"in(s=(0,x.Ue)(i,oi)))){e.next=7;break}throw new Error("failed to get confirmed transaction: "+s.error.message);case 7:if(a=s.result){e.next=10;break}return e.abrupt("return",a);case 10:return e.abrupt("return",(0,o.Z)((0,o.Z)({},a),{},{transaction:(0,o.Z)((0,o.Z)({},a.transaction),{},{message:new fr(a.transaction.message)})}));case 11:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getConfirmedBlock",value:function(){var e=(0,u.Z)(d().mark((function e(t,r){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBlock(t,{commitment:r});case 2:if(n=e.sent){e.next=5;break}throw new Error("Confirmed block "+t+" not found");case 5:return e.abrupt("return",(0,o.Z)((0,o.Z)({},n),{},{transactions:n.transactions.map((function(e){var t=e.transaction;return{meta:e.meta,transaction:yr.populate(t.message,t.signatures)}}))}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getBlocks",value:function(){var e=(0,u.Z)(d().mark((function e(t,r,n){var i,s,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._buildArgsAtLeastConfirmed(void 0!==r?[t,r]:[t],n),e.next=3,this._rpcRequest("getConfirmedBlocks",i);case 3:if(s=e.sent,!("error"in(o=(0,x.Ue)(s,Qr((0,x.IX)((0,x.Rx)())))))){e.next=7;break}throw new Error("failed to get blocks: "+o.error.message);case 7:return e.abrupt("return",o.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getConfirmedBlockSignatures",value:function(){var e=(0,u.Z)(d().mark((function e(t,r){var n,i,s,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r,void 0,{transactionDetails:"signatures",rewards:!1}),e.next=3,this._rpcRequest("getConfirmedBlock",n);case 3:if(i=e.sent,!("error"in(s=(0,x.Ue)(i,si)))){e.next=7;break}throw new Error("failed to get confirmed block: "+s.error.message);case 7:if(o=s.result){e.next=10;break}throw new Error("Confirmed block "+t+" not found");case 10:return e.abrupt("return",o);case 11:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getConfirmedTransaction",value:function(){var e=(0,u.Z)(d().mark((function e(t,r){var n,i,s,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getTransaction(t,{commitment:r});case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",n);case 5:return i=n.transaction,s=i.message,a=i.signatures,e.abrupt("return",(0,o.Z)((0,o.Z)({},n),{},{transaction:yr.populate(s,a)}));case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getParsedConfirmedTransaction",value:function(){var e=(0,u.Z)(d().mark((function e(t,r){var n,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed"),e.next=3,this._rpcRequest("getConfirmedTransaction",n);case 3:if(i=e.sent,!("error"in(s=(0,x.Ue)(i,ai)))){e.next=7;break}throw new Error("failed to get confirmed transaction: "+s.error.message);case 7:return e.abrupt("return",s.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getParsedConfirmedTransactions",value:function(){var e=(0,u.Z)(d().mark((function e(t,r){var n,i,s,o=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){return{methodName:"getConfirmedTransaction",args:o._buildArgsAtLeastConfirmed([e],r,"jsonParsed")}})),e.next=3,this._rpcBatchRequest(n);case 3:return i=e.sent,s=i.map((function(e){var t=(0,x.Ue)(e,ai);if("error"in t)throw new Error("failed to get confirmed transactions: "+t.error.message);return t.result})),e.abrupt("return",s);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getConfirmedSignaturesForAddress",value:function(){var e=(0,u.Z)(d().mark((function e(t,r,n){var i,s,o,a,u,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={},e.next=3,this.getFirstAvailableBlock();case 3:s=e.sent;case 4:if("until"in i){e.next=24;break}if(!(--r<=0||r<s)){e.next=8;break}return e.abrupt("break",24);case 8:return e.prev=8,e.next=11,this.getConfirmedBlockSignatures(r,"finalized");case 11:(o=e.sent).signatures.length>0&&(i.until=o.signatures[o.signatures.length-1].toString()),e.next=22;break;case 15:if(e.prev=15,e.t0=e.catch(8),!(e.t0 instanceof Error&&e.t0.message.includes("skipped"))){e.next=21;break}return e.abrupt("continue",4);case 21:throw e.t0;case 22:e.next=4;break;case 24:return e.next=26,this.getSlot("finalized");case 26:a=e.sent;case 27:if("before"in i){e.next=47;break}if(!(++n>a)){e.next=31;break}return e.abrupt("break",47);case 31:return e.prev=31,e.next=34,this.getConfirmedBlockSignatures(n);case 34:(u=e.sent).signatures.length>0&&(i.before=u.signatures[u.signatures.length-1].toString()),e.next=45;break;case 38:if(e.prev=38,e.t1=e.catch(31),!(e.t1 instanceof Error&&e.t1.message.includes("skipped"))){e.next=44;break}return e.abrupt("continue",27);case 44:throw e.t1;case 45:e.next=27;break;case 47:return e.next=49,this.getConfirmedSignaturesForAddress2(t,i);case 49:return c=e.sent,e.abrupt("return",c.map((function(e){return e.signature})));case 51:case"end":return e.stop()}}),e,this,[[8,15],[31,38]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getConfirmedSignaturesForAddress2",value:function(){var e=(0,u.Z)(d().mark((function e(t,r,n){var i,s,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,r),e.next=3,this._rpcRequest("getConfirmedSignaturesForAddress2",i);case 3:if(s=e.sent,!("error"in(o=(0,x.Ue)(s,Bn)))){e.next=7;break}throw new Error("failed to get confirmed signatures for address: "+o.error.message);case 7:return e.abrupt("return",o.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getSignaturesForAddress",value:function(){var e=(0,u.Z)(d().mark((function e(t,r,n){var i,s,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,r),e.next=3,this._rpcRequest("getSignaturesForAddress",i);case 3:if(s=e.sent,!("error"in(o=(0,x.Ue)(s,Tn)))){e.next=7;break}throw new Error("failed to get signatures for address: "+o.error.message);case 7:return e.abrupt("return",o.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getNonceAndContext",value:function(){var e=(0,u.Z)(d().mark((function e(t,r){var n,i,s,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAccountInfoAndContext(t,r);case 2:return n=e.sent,i=n.context,s=n.value,o=null,null!==s&&(o=Zr.fromAccountData(s.data)),e.abrupt("return",{context:i,value:o});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getNonce",value:function(){var e=(0,u.Z)(d().mark((function e(t,r){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNonceAndContext(t,r).then((function(e){return e.value})).catch((function(e){throw new Error("failed to get nonce for account "+t.toBase58()+": "+e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"requestAirdrop",value:function(){var e=(0,u.Z)(d().mark((function e(t,r){var n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("requestAirdrop",[t.toBase58(),r]);case 2:if(n=e.sent,!("error"in(i=(0,x.Ue)(n,fi)))){e.next=6;break}throw new Error("airdrop to "+t.toBase58()+" failed: "+i.error.message);case 6:return e.abrupt("return",i.result);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_recentBlockhash",value:function(){var e=(0,u.Z)(d().mark((function e(t){var r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=10;break}case 1:if(!this._pollingBlockhash){e.next=6;break}return e.next=4,Ar(100);case 4:e.next=1;break;case 6:if(r=Date.now()-this._blockhashInfo.lastFetch,n=r>=Vr,null===this._blockhashInfo.recentBlockhash||n){e.next=10;break}return e.abrupt("return",this._blockhashInfo.recentBlockhash);case 10:return e.next=12,this._pollNewBlockhash();case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_pollNewBlockhash",value:function(){var e=(0,u.Z)(d().mark((function e(){var t,r,n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._pollingBlockhash=!0,e.prev=1,t=Date.now(),r=0;case 4:if(!(r<50)){e.next=17;break}return e.next=7,this.getRecentBlockhash("finalized");case 7:if(n=e.sent,i=n.blockhash,this._blockhashInfo.recentBlockhash==i){e.next=12;break}return this._blockhashInfo={recentBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},e.abrupt("return",i);case 12:return e.next=14,Ar(200);case 14:r++,e.next=4;break;case 17:throw new Error("Unable to obtain a new blockhash after ".concat(Date.now()-t,"ms"));case 18:return e.prev=18,this._pollingBlockhash=!1,e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[1,,18,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"simulateTransaction",value:function(){var e=(0,u.Z)(d().mark((function e(t,r,n){var i,s,o,u,c,h,l,f,p,g,b,y,k,m,v,w,S;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=t instanceof yr?t:yr.populate(t)).nonceInfo||!r){e.next=5;break}(s=i).sign.apply(s,(0,a.Z)(r)),e.next=23;break;case 5:o=this._disableBlockhashCaching;case 6:return e.next=8,this._recentBlockhash(o);case 8:if(i.recentBlockhash=e.sent,r){e.next=11;break}return e.abrupt("break",23);case 11:if((u=i).sign.apply(u,(0,a.Z)(r)),i.signature){e.next=14;break}throw new Error("!signature");case 14:if(c=i.signature.toString("base64"),this._blockhashInfo.simulatedSignatures.includes(c)||this._blockhashInfo.transactionSignatures.includes(c)){e.next=20;break}return this._blockhashInfo.simulatedSignatures.push(c),e.abrupt("break",23);case 20:o=!0;case 21:e.next=6;break;case 23:return h=i._compile(),l=h.serialize(),f=i._serialize(l),p=f.toString("base64"),g={encoding:"base64",commitment:this.commitment},n&&(b=(Array.isArray(n)?n:h.nonProgramIds()).map((function(e){return e.toBase58()})),g.accounts={encoding:"base64",addresses:b}),r&&(g.sigVerify=!0),y=[p,g],e.next=33,this._rpcRequest("simulateTransaction",y);case 33:if(k=e.sent,!("error"in(m=(0,x.Ue)(k,ln)))){e.next=38;break}throw"data"in m.error&&(v=m.error.data.logs)&&Array.isArray(v)&&(S=(w="\n    ")+v.join(w),console.error(m.error.message,S)),new Mr("failed to simulate transaction: "+m.error.message,v);case 38:return e.abrupt("return",m.result);case 39:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"sendTransaction",value:function(){var e=(0,u.Z)(d().mark((function e(t,r,n){var i,s,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.nonceInfo){e.next=4;break}t.sign.apply(t,(0,a.Z)(r)),e.next=20;break;case 4:i=this._disableBlockhashCaching;case 5:return e.next=7,this._recentBlockhash(i);case 7:if(t.recentBlockhash=e.sent,t.sign.apply(t,(0,a.Z)(r)),t.signature){e.next=11;break}throw new Error("!signature");case 11:if(s=t.signature.toString("base64"),this._blockhashInfo.transactionSignatures.includes(s)){e.next=17;break}return this._blockhashInfo.transactionSignatures.push(s),e.abrupt("break",20);case 17:i=!0;case 18:e.next=5;break;case 20:return o=t.serialize(),e.next=23,this.sendRawTransaction(o,n);case 23:return e.abrupt("return",e.sent);case 24:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"sendRawTransaction",value:function(){var e=(0,u.Z)(d().mark((function e(t,r){var n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Z(t).toString("base64"),e.next=3,this.sendEncodedTransaction(n,r);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"sendEncodedTransaction",value:function(){var e=(0,u.Z)(d().mark((function e(t,r){var n,i,s,o,a,u,c,h,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={encoding:"base64"},i=r&&r.skipPreflight,s=r&&r.preflightCommitment||this.commitment,i&&(n.skipPreflight=i),s&&(n.preflightCommitment=s),o=[t,n],e.next=8,this._rpcRequest("sendTransaction",o);case 8:if(a=e.sent,!("error"in(u=(0,x.Ue)(a,pi)))){e.next=13;break}throw"data"in u.error&&(c=u.error.data.logs)&&Array.isArray(c)&&(l=(h="\n    ")+c.join(h),console.error(u.error.message,l)),new Mr("failed to send transaction: "+u.error.message,c);case 13:return e.abrupt("return",u.result);case 14:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_wsOnOpen",value:function(){var e=this;this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval((function(){e._rpcWebSocket.notify("ping").catch((function(){}))}),5e3),this._updateSubscriptions()}},{key:"_wsOnError",value:function(e){console.error("ws error:",e.message)}},{key:"_wsOnClose",value:function(e){this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==e?this._resetSubscriptions():this._updateSubscriptions()}},{key:"_subscribe",value:function(){var e=(0,u.Z)(d().mark((function e(t,r,n){var i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.subscriptionId){e.next=13;break}return t.subscriptionId="subscribing",e.prev=2,e.next=5,this._rpcWebSocket.call(r,n);case 5:"number"===typeof(i=e.sent)&&"subscribing"===t.subscriptionId&&(t.subscriptionId=i),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),"subscribing"===t.subscriptionId&&(t.subscriptionId=null),e.t0 instanceof Error&&console.error("".concat(r," error for argument"),n,e.t0.message);case 13:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_unsubscribe",value:function(){var e=(0,u.Z)(d().mark((function e(t,r){var n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(n=t.subscriptionId)||"string"==typeof n){e.next=11;break}return i=n,e.prev=3,e.next=6,this._rpcWebSocket.call(r,[i]);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),e.t0 instanceof Error&&console.error("".concat(r," error:"),e.t0.message);case 11:case"end":return e.stop()}}),e,this,[[3,8]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_resetSubscriptions",value:function(){Object.values(this._accountChangeSubscriptions).forEach((function(e){return e.subscriptionId=null})),Object.values(this._programAccountChangeSubscriptions).forEach((function(e){return e.subscriptionId=null})),Object.values(this._rootSubscriptions).forEach((function(e){return e.subscriptionId=null})),Object.values(this._signatureSubscriptions).forEach((function(e){return e.subscriptionId=null})),Object.values(this._slotSubscriptions).forEach((function(e){return e.subscriptionId=null})),Object.values(this._slotUpdateSubscriptions).forEach((function(e){return e.subscriptionId=null}))}},{key:"_updateSubscriptions",value:function(){var e=this,t=Object.keys(this._accountChangeSubscriptions).map(Number),r=Object.keys(this._programAccountChangeSubscriptions).map(Number),n=Object.keys(this._slotSubscriptions).map(Number),s=Object.keys(this._slotUpdateSubscriptions).map(Number),o=Object.keys(this._signatureSubscriptions).map(Number),a=Object.keys(this._rootSubscriptions).map(Number),u=Object.keys(this._logsSubscriptions).map(Number);if(0!==t.length||0!==r.length||0!==n.length||0!==s.length||0!==o.length||0!==a.length||0!==u.length)if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),this._rpcWebSocketConnected){var c,h=(0,i.Z)(t);try{for(h.s();!(c=h.n()).done;){var l=c.value,f=this._accountChangeSubscriptions[l];this._subscribe(f,"accountSubscribe",this._buildArgs([f.publicKey],f.commitment,"base64"))}}catch(L){h.e(L)}finally{h.f()}var p,d=(0,i.Z)(r);try{for(d.s();!(p=d.n()).done;){var g=p.value,b=this._programAccountChangeSubscriptions[g];this._subscribe(b,"programSubscribe",this._buildArgs([b.programId],b.commitment,"base64",{filters:b.filters}))}}catch(L){d.e(L)}finally{d.f()}var y,k=(0,i.Z)(n);try{for(k.s();!(y=k.n()).done;){var m=y.value,v=this._slotSubscriptions[m];this._subscribe(v,"slotSubscribe",[])}}catch(L){k.e(L)}finally{k.f()}var w,S=(0,i.Z)(s);try{for(S.s();!(w=S.n()).done;){var _=w.value,x=this._slotUpdateSubscriptions[_];this._subscribe(x,"slotsUpdatesSubscribe",[])}}catch(L){S.e(L)}finally{S.f()}var I,A=(0,i.Z)(o);try{for(A.s();!(I=A.n()).done;){var E=I.value,P=this._signatureSubscriptions[E],R=[P.signature];P.options&&R.push(P.options),this._subscribe(P,"signatureSubscribe",R)}}catch(L){A.e(L)}finally{A.f()}var B,T=(0,i.Z)(a);try{for(T.s();!(B=T.n()).done;){var Z=B.value,C=this._rootSubscriptions[Z];this._subscribe(C,"rootSubscribe",[])}}catch(L){T.e(L)}finally{T.f()}var O,U=(0,i.Z)(u);try{for(U.s();!(O=U.n()).done;){var N=O.value,W=this._logsSubscriptions[N],z=void 0;z="object"===typeof W.filter?{mentions:[W.filter.toString()]}:W.filter,this._subscribe(W,"logsSubscribe",this._buildArgs([z],W.commitment))}}catch(L){U.e(L)}finally{U.f()}}else this._rpcWebSocket.connect();else this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout((function(){e._rpcWebSocketIdleTimeout=null,e._rpcWebSocket.close()}),500))}},{key:"_wsOnAccountNotification",value:function(e){for(var t=(0,x.Ue)(e,Zn),r=0,n=Object.values(this._accountChangeSubscriptions);r<n.length;r++){var i=n[r];if(i.subscriptionId===t.subscription)return void i.callback(t.result.value,t.result.context)}}},{key:"onAccountChange",value:function(e,t,r){var n=++this._accountChangeSubscriptionCounter;return this._accountChangeSubscriptions[n]={publicKey:e.toBase58(),callback:t,commitment:r,subscriptionId:null},this._updateSubscriptions(),n}},{key:"removeAccountChangeListener",value:function(){var e=(0,u.Z)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._accountChangeSubscriptions[t]){e.next=8;break}return r=this._accountChangeSubscriptions[t],delete this._accountChangeSubscriptions[t],e.next=5,this._unsubscribe(r,"accountUnsubscribe");case 5:this._updateSubscriptions(),e.next=9;break;case 8:throw new Error("Unknown account change id: ".concat(t));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_wsOnProgramAccountNotification",value:function(e){for(var t=(0,x.Ue)(e,On),r=0,n=Object.values(this._programAccountChangeSubscriptions);r<n.length;r++){var i=n[r];if(i.subscriptionId===t.subscription){var s=t.result,o=s.value,a=s.context;return void i.callback({accountId:o.pubkey,accountInfo:o.account},a)}}}},{key:"onProgramAccountChange",value:function(e,t,r,n){var i=++this._programAccountChangeSubscriptionCounter;return this._programAccountChangeSubscriptions[i]={programId:e.toBase58(),callback:t,commitment:r,subscriptionId:null,filters:n},this._updateSubscriptions(),i}},{key:"removeProgramAccountChangeListener",value:function(){var e=(0,u.Z)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._programAccountChangeSubscriptions[t]){e.next=8;break}return r=this._programAccountChangeSubscriptions[t],delete this._programAccountChangeSubscriptions[t],e.next=5,this._unsubscribe(r,"programUnsubscribe");case 5:this._updateSubscriptions(),e.next=9;break;case 8:throw new Error("Unknown program account change id: ".concat(t));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onLogs",value:function(e,t,r){var n=++this._logsSubscriptionCounter;return this._logsSubscriptions[n]={filter:e,callback:t,commitment:r,subscriptionId:null},this._updateSubscriptions(),n}},{key:"removeOnLogsListener",value:function(){var e=(0,u.Z)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._logsSubscriptions[t]){e.next=2;break}throw new Error("Unknown logs id: ".concat(t));case 2:return r=this._logsSubscriptions[t],delete this._logsSubscriptions[t],e.next=6,this._unsubscribe(r,"logsUnsubscribe");case 6:this._updateSubscriptions();case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_wsOnLogsNotification",value:function(e){var t,r=(0,x.Ue)(e,gi),n=Object.keys(this._logsSubscriptions).map(Number),s=(0,i.Z)(n);try{for(s.s();!(t=s.n()).done;){var o=t.value,a=this._logsSubscriptions[o];if(a.subscriptionId===r.subscription)return void a.callback(r.result.value,r.result.context)}}catch(u){s.e(u)}finally{s.f()}}},{key:"_wsOnSlotNotification",value:function(e){for(var t=(0,x.Ue)(e,Nn),r=0,n=Object.values(this._slotSubscriptions);r<n.length;r++){var i=n[r];if(i.subscriptionId===t.subscription)return void i.callback(t.result)}}},{key:"onSlotChange",value:function(e){var t=++this._slotSubscriptionCounter;return this._slotSubscriptions[t]={callback:e,subscriptionId:null},this._updateSubscriptions(),t}},{key:"removeSlotChangeListener",value:function(){var e=(0,u.Z)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._slotSubscriptions[t]){e.next=8;break}return r=this._slotSubscriptions[t],delete this._slotSubscriptions[t],e.next=5,this._unsubscribe(r,"slotUnsubscribe");case 5:this._updateSubscriptions(),e.next=9;break;case 8:throw new Error("Unknown slot change id: ".concat(t));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_wsOnSlotUpdatesNotification",value:function(e){for(var t=(0,x.Ue)(e,zn),r=0,n=Object.values(this._slotUpdateSubscriptions);r<n.length;r++){var i=n[r];if(i.subscriptionId===t.subscription)return void i.callback(t.result)}}},{key:"onSlotUpdate",value:function(e){var t=++this._slotUpdateSubscriptionCounter;return this._slotUpdateSubscriptions[t]={callback:e,subscriptionId:null},this._updateSubscriptions(),t}},{key:"removeSlotUpdateListener",value:function(){var e=(0,u.Z)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._slotUpdateSubscriptions[t]){e.next=8;break}return r=this._slotUpdateSubscriptions[t],delete this._slotUpdateSubscriptions[t],e.next=5,this._unsubscribe(r,"slotsUpdatesUnsubscribe");case 5:this._updateSubscriptions(),e.next=9;break;case 8:throw new Error("Unknown slot update id: ".concat(t));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_buildArgs",value:function(e,t,r,n){var i=t||this._commitment;if(i||r||n){var s={};r&&(s.encoding=r),i&&(s.commitment=i),n&&(s=Object.assign(s,n)),e.push(s)}return e}},{key:"_buildArgsAtLeastConfirmed",value:function(e,t,r,n){var i=t||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,n)}},{key:"_wsOnSignatureNotification",value:function(e){for(var t=(0,x.Ue)(e,Ln),r=0,n=Object.entries(this._signatureSubscriptions);r<n.length;r++){var i=(0,s.Z)(n[r],2),o=i[0],a=i[1];if(a.subscriptionId===t.subscription)return void("receivedSignature"===t.result.value?a.callback({type:"received"},t.result.context):(delete this._signatureSubscriptions[Number(o)],this._updateSubscriptions(),a.callback({type:"status",result:t.result.value},t.result.context)))}}},{key:"onSignature",value:function(e,t,r){var n=++this._signatureSubscriptionCounter;return this._signatureSubscriptions[n]={signature:e,callback:function(e,r){"status"===e.type&&t(e.result,r)},options:{commitment:r},subscriptionId:null},this._updateSubscriptions(),n}},{key:"onSignatureWithOptions",value:function(e,t,r){var n=++this._signatureSubscriptionCounter;return this._signatureSubscriptions[n]={signature:e,callback:t,options:r,subscriptionId:null},this._updateSubscriptions(),n}},{key:"removeSignatureListener",value:function(){var e=(0,u.Z)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._signatureSubscriptions[t]){e.next=8;break}return r=this._signatureSubscriptions[t],delete this._signatureSubscriptions[t],e.next=5,this._unsubscribe(r,"signatureUnsubscribe");case 5:this._updateSubscriptions(),e.next=9;break;case 8:throw new Error("Unknown signature result id: ".concat(t));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_wsOnRootNotification",value:function(e){for(var t=(0,x.Ue)(e,Kn),r=0,n=Object.values(this._rootSubscriptions);r<n.length;r++){var i=n[r];if(i.subscriptionId===t.subscription)return void i.callback(t.result)}}},{key:"onRootChange",value:function(e){var t=++this._rootSubscriptionCounter;return this._rootSubscriptions[t]={callback:e,subscriptionId:null},this._updateSubscriptions(),t}},{key:"removeRootChangeListener",value:function(){var e=(0,u.Z)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._rootSubscriptions[t]){e.next=8;break}return r=this._rootSubscriptions[t],delete this._rootSubscriptions[t],e.next=5,this._unsubscribe(r,"rootUnsubscribe");case 5:this._updateSubscriptions(),e.next=9;break;case 8:throw new Error("Unknown root change id: ".concat(t));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),yi=function(){function e(t){(0,l.Z)(this,e),this._keypair=void 0,this._keypair=t||b().sign.keyPair()}return(0,f.Z)(e,[{key:"publicKey",get:function(){return new er(this._keypair.publicKey)}},{key:"secretKey",get:function(){return this._keypair.secretKey}}],[{key:"generate",value:function(){return new e(b().sign.keyPair())}},{key:"fromSecretKey",value:function(t,r){var n=b().sign.keyPair.fromSecretKey(t);if(!r||!r.skipValidation){var i=(new TextEncoder).encode("@solana/web3.js-validation-v1"),s=b().sign.detached(i,n.secretKey);if(!b().sign.detached.verify(i,s,n.publicKey))throw new Error("provided secretKey is invalid")}return new e(n)}},{key:"fromSeed",value:function(t){return new e(b().sign.keyPair.fromSeed(t))}}]),e}(),ki=_.struct([_.u8("numSignatures"),_.u8("padding"),_.u16("signatureOffset"),_.u16("signatureInstructionIndex"),_.u16("publicKeyOffset"),_.u16("publicKeyInstructionIndex"),_.u16("messageDataOffset"),_.u16("messageDataSize"),_.u16("messageInstructionIndex")]),mi=function(){function e(){(0,l.Z)(this,e)}return(0,f.Z)(e,null,[{key:"createInstructionWithPublicKey",value:function(t){var r=t.publicKey,n=t.message,i=t.signature,s=t.instructionIndex;pr(32===r.length,"Public Key must be ".concat(32," bytes but received ").concat(r.length," bytes")),pr(64===i.length,"Signature must be ".concat(64," bytes but received ").concat(i.length," bytes"));var o=ki.span,a=o+r.length,u=a+i.length,c=y.Buffer.alloc(u+n.length);return ki.encode({numSignatures:1,padding:0,signatureOffset:a,signatureInstructionIndex:s,publicKeyOffset:o,publicKeyInstructionIndex:s,messageDataOffset:u,messageDataSize:n.length,messageInstructionIndex:s},c),c.fill(r,o),c.fill(i,a),c.fill(n,u),new br({keys:[],programId:e.programId,data:c})}},{key:"createInstructionWithPrivateKey",value:function(e){var t=e.privateKey,r=e.message,n=e.instructionIndex;pr(64===t.length,"Private key must be ".concat(64," bytes but received ").concat(t.length," bytes"));try{var i=yi.fromSecretKey(t),s=i.publicKey.toBytes(),o=b().sign.detached(r,i.secretKey);return this.createInstructionWithPublicKey({publicKey:s,message:r,signature:o,instructionIndex:n})}catch(a){throw new Error("Error creating instruction; ".concat(a))}}}]),e}();mi.programId=new er("Ed25519SigVerify111111111111111111111111111");var vi=new er("StakeConfig11111111111111111111111111111111"),wi=function e(t,r){(0,l.Z)(this,e),this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=r},Si=function e(t,r,n){(0,l.Z)(this,e),this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=r,this.custodian=n};Si.default=new Si(0,0,er.default);var _i=function(){function e(){(0,l.Z)(this,e)}return(0,f.Z)(e,null,[{key:"decodeInstructionType",value:function(e){this.checkProgramId(e.programId);for(var t,r=_.u32("instruction").decode(e.data),n=0,i=Object.entries(xi);n<i.length;n++){var o=(0,s.Z)(i[n],2),a=o[0];if(o[1].index==r){t=a;break}}if(!t)throw new Error("Instruction type incorrect; not a StakeInstruction");return t}},{key:"decodeInitialize",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);var t=Pr(xi.Initialize,e.data),r=t.authorized,n=t.lockup;return{stakePubkey:e.keys[0].pubkey,authorized:new wi(new er(r.staker),new er(r.withdrawer)),lockup:new Si(n.unixTimestamp,n.epoch,new er(n.custodian))}}},{key:"decodeDelegate",value:function(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),Pr(xi.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}},{key:"decodeAuthorize",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);var t=Pr(xi.Authorize,e.data),r=t.newAuthorized,n=t.stakeAuthorizationType,i={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new er(r),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(i.custodianPubkey=e.keys[3].pubkey),i}},{key:"decodeAuthorizeWithSeed",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);var t=Pr(xi.AuthorizeWithSeed,e.data),r=t.newAuthorized,n=t.stakeAuthorizationType,i=t.authoritySeed,s=t.authorityOwner,o={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:i,authorityOwner:new er(s),newAuthorizedPubkey:new er(r),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(o.custodianPubkey=e.keys[3].pubkey),o}},{key:"decodeSplit",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);var t=Pr(xi.Split,e.data).lamports;return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}},{key:"decodeMerge",value:function(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Pr(xi.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}},{key:"decodeWithdraw",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);var t=Pr(xi.Withdraw,e.data).lamports,r={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(r.custodianPubkey=e.keys[5].pubkey),r}},{key:"decodeDeactivate",value:function(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Pr(xi.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}},{key:"checkProgramId",value:function(e){if(!e.equals(Ai.programId))throw new Error("invalid instruction; programId is not StakeProgram")}},{key:"checkKeyLength",value:function(e,t){if(e.length<t)throw new Error("invalid instruction; found ".concat(e.length," keys, expected at least ").concat(t))}}]),e}(),xi=Object.freeze({Initialize:{index:0,layout:_.struct([_.u32("instruction"),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"authorized";return _.struct([ur("staker"),ur("withdrawer")],e)}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"lockup";return _.struct([_.ns64("unixTimestamp"),_.ns64("epoch"),ur("custodian")],e)}()])},Authorize:{index:1,layout:_.struct([_.u32("instruction"),ur("newAuthorized"),_.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:_.struct([_.u32("instruction")])},Split:{index:3,layout:_.struct([_.u32("instruction"),_.ns64("lamports")])},Withdraw:{index:4,layout:_.struct([_.u32("instruction"),_.ns64("lamports")])},Deactivate:{index:5,layout:_.struct([_.u32("instruction")])},Merge:{index:7,layout:_.struct([_.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:_.struct([_.u32("instruction"),ur("newAuthorized"),_.u32("stakeAuthorizationType"),cr("authoritySeed"),ur("authorityOwner")])}}),Ii=Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),Ai=function(){function e(){(0,l.Z)(this,e)}return(0,f.Z)(e,null,[{key:"initialize",value:function(e){var t=e.stakePubkey,r=e.authorized,n=e.lockup||Si.default,i=Er(xi.Initialize,{authorized:{staker:Z(r.staker.toBuffer()),withdrawer:Z(r.withdrawer.toBuffer())},lockup:{unixTimestamp:n.unixTimestamp,epoch:n.epoch,custodian:Z(n.custodian.toBuffer())}}),s={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:vr,isSigner:!1,isWritable:!1}],programId:this.programId,data:i};return new br(s)}},{key:"createAccountWithSeed",value:function(e){var t=new yr;t.add(Ur.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));var r=e.stakePubkey,n=e.authorized,i=e.lockup;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}},{key:"createAccount",value:function(e){var t=new yr;t.add(Ur.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));var r=e.stakePubkey,n=e.authorized,i=e.lockup;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}},{key:"delegate",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.votePubkey,i=Er(xi.Delegate);return(new yr).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:kr,isSigner:!1,isWritable:!1},{pubkey:Sr,isSigner:!1,isWritable:!1},{pubkey:vi,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}},{key:"authorize",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.newAuthorizedPubkey,i=e.stakeAuthorizationType,s=e.custodianPubkey,o=Er(xi.Authorize,{newAuthorized:Z(n.toBuffer()),stakeAuthorizationType:i.index}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:kr,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&a.push({pubkey:s,isSigner:!1,isWritable:!1}),(new yr).add({keys:a,programId:this.programId,data:o})}},{key:"authorizeWithSeed",value:function(e){var t=e.stakePubkey,r=e.authorityBase,n=e.authoritySeed,i=e.authorityOwner,s=e.newAuthorizedPubkey,o=e.stakeAuthorizationType,a=e.custodianPubkey,u=Er(xi.AuthorizeWithSeed,{newAuthorized:Z(s.toBuffer()),stakeAuthorizationType:o.index,authoritySeed:n,authorityOwner:Z(i.toBuffer())}),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:kr,isSigner:!1,isWritable:!1}];return a&&c.push({pubkey:a,isSigner:!1,isWritable:!1}),(new yr).add({keys:c,programId:this.programId,data:u})}},{key:"split",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.splitStakePubkey,i=e.lamports,s=new yr;s.add(Ur.createAccount({fromPubkey:r,newAccountPubkey:n,lamports:0,space:this.space,programId:this.programId}));var o=Er(xi.Split,{lamports:i});return s.add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}},{key:"merge",value:function(e){var t=e.stakePubkey,r=e.sourceStakePubKey,n=e.authorizedPubkey,i=Er(xi.Merge);return(new yr).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:kr,isSigner:!1,isWritable:!1},{pubkey:Sr,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}},{key:"withdraw",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.toPubkey,i=e.lamports,s=e.custodianPubkey,o=Er(xi.Withdraw,{lamports:i}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:kr,isSigner:!1,isWritable:!1},{pubkey:Sr,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&a.push({pubkey:s,isSigner:!1,isWritable:!1}),(new yr).add({keys:a,programId:this.programId,data:o})}},{key:"deactivate",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=Er(xi.Deactivate);return(new yr).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:kr,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}}]),e}();Ai.programId=new er("Stake11111111111111111111111111111111111111"),Ai.space=200;var Ei=R().publicKeyCreate,Pi=R().ecdsaSign,Ri=_.struct([_.u8("numSignatures"),_.u16("signatureOffset"),_.u8("signatureInstructionIndex"),_.u16("ethAddressOffset"),_.u8("ethAddressInstructionIndex"),_.u16("messageDataOffset"),_.u16("messageDataSize"),_.u8("messageInstructionIndex"),_.blob(20,"ethAddress"),_.blob(64,"signature"),_.u8("recoveryId")]),Bi=function(){function e(){(0,l.Z)(this,e)}return(0,f.Z)(e,null,[{key:"publicKeyToEthAddress",value:function(e){pr(64===e.length,"Public key must be ".concat(64," bytes but received ").concat(e.length," bytes"));try{return y.Buffer.from(T().keccak_256.update(Z(e)).digest()).slice(-20)}catch(t){throw new Error("Error constructing Ethereum address: ".concat(t))}}},{key:"createInstructionWithPublicKey",value:function(t){var r=t.publicKey,n=t.message,i=t.signature,s=t.recoveryId,o=t.instructionIndex;return e.createInstructionWithEthAddress({ethAddress:e.publicKeyToEthAddress(r),message:n,signature:i,recoveryId:s,instructionIndex:o})}},{key:"createInstructionWithEthAddress",value:function(t){var r,n=t.ethAddress,i=t.message,s=t.signature,o=t.recoveryId,a=t.instructionIndex,u=void 0===a?0:a;pr(20===(r="string"===typeof n?n.startsWith("0x")?y.Buffer.from(n.substr(2),"hex"):y.Buffer.from(n,"hex"):n).length,"Address must be ".concat(20," bytes but received ").concat(r.length," bytes"));var c=12+r.length,h=c+s.length+1,l=y.Buffer.alloc(Ri.span+i.length);return Ri.encode({numSignatures:1,signatureOffset:c,signatureInstructionIndex:u,ethAddressOffset:12,ethAddressInstructionIndex:u,messageDataOffset:h,messageDataSize:i.length,messageInstructionIndex:u,signature:Z(s),ethAddress:Z(r),recoveryId:o},l),l.fill(Z(i),Ri.span),new br({keys:[],programId:e.programId,data:l})}},{key:"createInstructionWithPrivateKey",value:function(e){var t=e.privateKey,r=e.message,n=e.instructionIndex;pr(32===t.length,"Private key must be ".concat(32," bytes but received ").concat(t.length," bytes"));try{var i=Z(t),s=Ei(i,!1).slice(1),o=y.Buffer.from(T().keccak_256.update(Z(r)).digest()),a=Pi(o,i),u=a.signature,c=a.recid;return this.createInstructionWithPublicKey({publicKey:s,message:r,signature:u,recoveryId:c,instructionIndex:n})}catch(h){throw new Error("Error creating instruction; ".concat(h))}}}]),e}();Bi.programId=new er("KeccakSecp256k11111111111111111111111111111");var Ti=new er("Va1idator1nfo111111111111111111111111111111"),Zi=(0,x.dt)({name:(0,x.Z_)(),website:(0,x.jt)((0,x.Z_)()),details:(0,x.jt)((0,x.Z_)()),keybaseUsername:(0,x.jt)((0,x.Z_)())}),Ci=function(){function e(t,r){(0,l.Z)(this,e),this.key=void 0,this.info=void 0,this.key=t,this.info=r}return(0,f.Z)(e,null,[{key:"fromConfigData",value:function(t){var r=(0,a.Z)(t);if(2!==hr(r))return null;for(var n=[],i=0;i<2;i++){var s=new er(r.slice(0,32)),o=1===(r=r.slice(32)).slice(0,1)[0];r=r.slice(1),n.push({publicKey:s,isSigner:o})}if(n[0].publicKey.equals(Ti)&&n[1].isSigner){var u=cr().decode(y.Buffer.from(r)),c=JSON.parse(u);return(0,x.hu)(c,Zi),new e(n[1].publicKey,c)}return null}}]),e}(),Oi=new er("Vote111111111111111111111111111111111111111"),Ui=_.struct([ur("nodePubkey"),ur("authorizedVoterPubkey"),ur("authorizedWithdrawerPubkey"),_.u8("commission"),_.nu64(),_.seq(_.struct([_.nu64("slot"),_.u32("confirmationCount")]),_.offset(_.u32(),-8),"votes"),_.u8("rootSlotValid"),_.nu64("rootSlot"),_.nu64("epoch"),_.nu64("credits"),_.nu64("lastEpochCredits"),_.nu64(),_.seq(_.struct([_.nu64("epoch"),_.nu64("credits"),_.nu64("prevCredits")]),_.offset(_.u32(),-8),"epochCredits")]),Ni=function(){function e(t){(0,l.Z)(this,e),this.nodePubkey=void 0,this.authorizedVoterPubkey=void 0,this.authorizedWithdrawerPubkey=void 0,this.commission=void 0,this.votes=void 0,this.rootSlot=void 0,this.epoch=void 0,this.credits=void 0,this.lastEpochCredits=void 0,this.epochCredits=void 0,this.nodePubkey=t.nodePubkey,this.authorizedVoterPubkey=t.authorizedVoterPubkey,this.authorizedWithdrawerPubkey=t.authorizedWithdrawerPubkey,this.commission=t.commission,this.votes=t.votes,this.rootSlot=t.rootSlot,this.epoch=t.epoch,this.credits=t.credits,this.lastEpochCredits=t.lastEpochCredits,this.epochCredits=t.epochCredits}return(0,f.Z)(e,null,[{key:"fromAccountData",value:function(t){var r=Ui.decode(Z(t),0),n=r.rootSlot;return r.rootSlotValid||(n=null),new e({nodePubkey:new er(r.nodePubkey),authorizedVoterPubkey:new er(r.authorizedVoterPubkey),authorizedWithdrawerPubkey:new er(r.authorizedWithdrawerPubkey),commission:r.commission,votes:r.votes,rootSlot:n,epoch:r.epoch,credits:r.credits,lastEpochCredits:r.lastEpochCredits,epochCredits:r.epochCredits})}}]),e}();function Wi(e,t,r){return zi.apply(this,arguments)}function zi(){return(zi=(0,u.Z)(d().mark((function e(t,r,n){var i,s,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment},e.next=3,t.sendRawTransaction(r,i);case 3:return s=e.sent,e.next=6,t.confirmTransaction(s,n&&n.commitment);case 6:if(!(o=e.sent.value).err){e.next=9;break}throw new Error("Raw transaction ".concat(s," failed (").concat(JSON.stringify(o),")"));case 9:return e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Li={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com"}};function Ki(e,t){var r=!1===t?"http":"https";if(!e)return Li[r].devnet;var n=Li[r][e];if(!n)throw new Error("Unknown ".concat(r," cluster: ").concat(e));return n}var ji=1e9},45263:function(e,t,r){e.exports=r(62175)}}]);
//# sourceMappingURL=82.87babdd9.chunk.js.map